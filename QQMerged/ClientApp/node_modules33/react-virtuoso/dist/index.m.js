import{systemToComponent as e}from"@virtuoso.dev/react-urx";import{system as t,stream as n,statefulStream as o,connect as r,getValue as i,streamFromEmitter as l,pipe as u,filter as a,distinctUntilChanged as s,subscribe as c,tup as d,merge as f,duc as h,skip as m,mapTo as p,debounceTime as v,map as g,combineLatest as I,scan as C,publish as x,throttleTime as S,withLatestFrom as T,statefulStreamFromEmitter as w,handleNext as y,noop as H,prop as b,tap as R,compose as z}from"@virtuoso.dev/urx";import{useRef as k,useCallback as B,useEffect as E,useLayoutEffect as L,memo as O,createElement as M}from"react";function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)t.indexOf(n=i[o])>=0||(r[n]=e[n]);return r}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function G(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function W(e,t){return!(!e||e[0]!==t[0]||e[1]!==t[1])}function V(e,t){return!(!e||e.startIndex!==t.startIndex||e.endIndex!==t.endIndex)}var N,D,U=t(function(){var e=n(),t=o(0),i=n(),l=o(0),u=n(),a=n(),s=o(0),c=o(0),d=n(),f=n(),h=o(!1);return r(e,l),{scrollTop:e,viewportHeight:u,headerHeight:s,footerHeight:c,scrollHeight:a,smoothScrollTargetReached:i,scrollTo:d,scrollBy:f,statefulScrollTop:l,deviation:t,scrollingInProgress:h}},[],{singleton:!0});!function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"}(D||(D={}));var _=((N={})[D.DEBUG]="debug",N[D.INFO]="log",N[D.WARN]="warn",N[D.ERROR]="error",N),j=t(function(){var e=o(D.ERROR);return{log:o(function(t,n,o){var r;void 0===o&&(o=D.INFO),o>=(null!=(r=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?r:i(e))&&console[_[o]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: black",t,n)}),logLevel:e}},[],{singleton:!0}),K=t(function(e){var t=e[0].log,n=o(!1),r=l(u(n,a(function(e){return e}),s()));return c(n,function(e){e&&i(t)("props updated",{},D.DEBUG)}),{propsReady:n,didMount:r}},d(j),{singleton:!0}),Y="up",Z={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},q=t(function(e){var t=e[0],a=t.scrollTop,d=t.viewportHeight,S=t.headerHeight,T=t.footerHeight,w=t.scrollHeight,y=o(!1),H=o(!0),b=n(),R=n(),z=o(4),k=l(u(f(u(h(a),m(1),p(!0)),u(h(a),m(1),p(!1),v(100))),s()));r(u(h(a),g(function(e){return 0===e}),s()),H),r(H,R);var B=l(u(I(w,h(a),h(d),h(S),h(T),h(z)),C(function(e,t){var n=t[0],o=t[1],r=t[2],i={viewportHeight:r,scrollTop:o,scrollHeight:n};return o+r-n>-t[5]?{atBottom:!0,state:i}:{atBottom:!1,notAtBottomBecause:i.scrollHeight>e.state.scrollHeight?"SIZE_INCREASED":r<e.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":o<e.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:i}},Z),s(function(e,t){return e&&e.atBottom===t.atBottom})));r(u(B,g(function(e){return e.atBottom})),y),c(y,function(e){setTimeout(function(){return x(b,e)})});var E=o("down");return r(u(a,C(function(e,t){return{direction:t<e.prevScrollTop&&!i(y)?Y:"down",prevScrollTop:t}},{direction:"down",prevScrollTop:0}),g(function(e){return e.direction})),E),{isScrolling:k,isAtTop:H,isAtBottom:y,atBottomState:B,atTopStateChange:R,atBottomStateChange:b,scrollDirection:E,atBottomThreshold:z}},d(U)),$=t(function(e){var t=e[0].scrollTop,i=e[1].isScrolling,l=o(0),d=o(!1),f=n(),h=o(!1);return r(u(i,a(function(e){return!e}),p(0)),l),r(u(t,S(100),T(i),a(function(e){return!!e[1]}),C(function(e,t){return[e[1],t[0]]},[0,0]),g(function(e){return e[1]-e[0]})),l),r(u(l,T(h,d,f),a(function(e){return!!e[1]}),g(function(e){var t=e[0],n=e[1],o=e[2],r=e[3],i=n.enter;if(o){if((0,n.exit)(t,r))return!1}else if(i(t,r))return!0;return o}),s()),d),c(u(I(d,l,f),T(h)),function(e){var t=e[0],n=e[1];return t[0]&&n&&n.change&&n.change(t[1],t[2])}),{isSeeking:d,scrollSeekConfiguration:h,scrollVelocity:l,scrollSeekRangeChanged:f}},d(U,q),{singleton:!0}),J={lvl:0};function Q(e,t,n,o,r){return void 0===o&&(o=J),void 0===r&&(r=J),{k:e,v:t,lvl:n,l:o,r:r}}function X(e){return e===J}function ee(){return J}function te(e,t){if(X(e))return J;var n=e.k,o=e.l,r=e.r;if(t===n){if(X(o))return r;if(X(r))return o;var i=le(o);return ce(ae(e,{k:i[0],v:i[1],l:ue(o)}))}return ce(ae(e,t<n?{l:te(o,t)}:{r:te(r,t)}))}function ne(e,t,n){if(void 0===n&&(n="k"),X(e))return[-Infinity,void 0];if(e[n]===t)return[e.k,e.v];if(e[n]<t){var o=ne(e.r,t,n);return-Infinity===o[0]?[e.k,e.v]:o}return ne(e.l,t,n)}function oe(e,t,n){return X(e)?Q(t,n,1):t===e.k?ae(e,{k:t,v:n}):function(e){return he(me(e))}(ae(e,t<e.k?{l:oe(e.l,t,n)}:{r:oe(e.r,t,n)}))}function re(e,t,n){if(X(e))return[];var o=e.k,r=e.v,i=e.r,l=[];return o>t&&(l=l.concat(re(e.l,t,n))),o>=t&&o<=n&&l.push({k:o,v:r}),o<=n&&(l=l.concat(re(i,t,n))),l}function ie(e){return X(e)?[]:[].concat(ie(e.l),[{k:e.k,v:e.v}],ie(e.r))}function le(e){return X(e.r)?[e.k,e.v]:le(e.r)}function ue(e){return X(e.r)?e.l:ce(ae(e,{r:ue(e.r)}))}function ae(e,t){return Q(void 0!==t.k?t.k:e.k,void 0!==t.v?t.v:e.v,void 0!==t.lvl?t.lvl:e.lvl,void 0!==t.l?t.l:e.l,void 0!==t.r?t.r:e.r)}function se(e){return X(e)||e.lvl>e.r.lvl}function ce(e){var t=e.l,n=e.r,o=e.lvl;if(n.lvl>=o-1&&t.lvl>=o-1)return e;if(o>n.lvl+1){if(se(t))return me(ae(e,{lvl:o-1}));if(X(t)||X(t.r))throw new Error("Unexpected empty nodes");return ae(t.r,{l:ae(t,{r:t.r.l}),r:ae(e,{l:t.r.r,lvl:o-1}),lvl:o})}if(se(e))return he(ae(e,{lvl:o-1}));if(X(n)||X(n.l))throw new Error("Unexpected empty nodes");var r=n.l,i=se(r)?n.lvl-1:n.lvl;return ae(r,{l:ae(e,{r:r.l,lvl:o-1}),r:he(ae(n,{l:r.r,lvl:i})),lvl:r.lvl+1})}function de(e,t,n){return X(e)?[]:fe(re(e,ne(e,t)[0],n),function(e){return{index:e.k,value:e.v}})}function fe(e,t){var n=e.length;if(0===n)return[];for(var o=t(e[0]),r=o.index,i=o.value,l=[],u=1;u<n;u++){var a=t(e[u]),s=a.index,c=a.value;l.push({start:r,end:s-1,value:i}),r=s,i=c}return l.push({start:r,end:Infinity,value:i}),l}function he(e){var t=e.r,n=e.lvl;return X(t)||X(t.r)||t.lvl!==n||t.r.lvl!==n?e:ae(t,{l:ae(e,{r:t.l}),lvl:n+1})}function me(e){var t=e.l;return X(t)||t.lvl!==e.lvl?e:ae(t,{r:ae(e,{l:t.r})})}function pe(e,t,n,o){void 0===o&&(o=0);for(var r=e.length-1;o<=r;){var i=Math.floor((o+r)/2),l=n(e[i],t);if(0===l)return i;if(-1===l){if(r-o<2)return i-1;r=i-1}else{if(r===o)return i;o=i+1}}throw new Error("Failed binary finding record in array - "+e.join(",")+", searched for "+t)}function ve(e,t,n){return e[pe(e,t,n)]}function ge(e,t){return Math.round(e.getBoundingClientRect()[t])}function Ie(e){var t=e.size,n=e.startIndex,o=e.endIndex;return function(e){return e.start===n&&(e.end===o||Infinity===e.end)&&e.value===t}}function Ce(e,t){var n=e.index;return t===n?0:t<n?-1:1}function xe(e,t){var n=e.offset;return t===n?0:t<n?-1:1}function Se(e){return{index:e.index,value:e}}function Te(e,t){var n=t[0],o=t[1];n.length>0&&(0,t[2])("received item sizes",n,D.DEBUG);var r=e.sizeTree,i=e.offsetTree,l=r,u=0;if(o.length>0&&X(r)&&2===n.length){var a=n[0].size,s=n[1].size;l=o.reduce(function(e,t){return oe(oe(e,t,a),t+1,s)},l)}else{var c=function(e,t){for(var n,o=X(e)?0:Infinity,r=G(t);!(n=r()).done;){var i=n.value,l=i.size,u=i.startIndex,a=i.endIndex;if(o=Math.min(o,u),X(e))e=oe(e,0,l);else{var s=de(e,u-1,a+1);if(!s.some(Ie(i))){for(var c,d=!1,f=!1,h=G(s);!(c=h()).done;){var m=c.value,p=m.start,v=m.end,g=m.value;d?(a>=p||l===g)&&(e=te(e,p)):(f=g!==l,d=!0),v>a&&a>=p&&g!==l&&(e=oe(e,a+1,g))}f&&(e=oe(e,u,l))}}}return[e,o]}(l,n);l=c[0],u=c[1]}if(l===r)return e;var d=0,f=0,h=0,m=0;if(0!==u){m=pe(i,u-1,Ce),h=i[m].offset;var p=ne(l,u-1);d=p[0],f=p[1],i.length&&i[m].size===ne(l,u)[1]&&(m-=1),i=i.slice(0,m+1)}else i=[];for(var v,g=G(de(l,u,Infinity));!(v=g()).done;){var I=v.value,C=I.start,x=I.value,S=(C-d)*f+h;i.push({offset:S,size:x,index:C}),d=C,h=S,f=x}return{sizeTree:l,offsetTree:i,groupOffsetTree:o.reduce(function(e,t){return oe(e,t,we(t,i))},ee()),lastIndex:d,lastOffset:h,lastSize:f,groupIndices:o}}function we(e,t){if(0===t.length)return 0;var n=ve(t,e,Ce);return n.size*(e-n.index)+n.offset}function ye(e,t){if(!He(t))return e;for(var n=0;t.groupIndices[n]<=e+n;)n++;return e+n}function He(e){return!X(e.groupOffsetTree)}var be={offsetHeight:"height",offsetWidth:"width"},Re=t(function(e){var t=e[0].log,d=n(),f=n(),h=n(),m=o(0),p=o([]),v=o(void 0),I=o(void 0),x=o(function(e,t){return ge(e,be[t])}),S=o(void 0),y={offsetTree:[],sizeTree:ee(),groupOffsetTree:ee(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},H=w(u(d,T(p,t),C(Te,y),s()),y);r(u(p,a(function(e){return e.length>0}),T(H),g(function(e){var t=e[0],n=e[1],o=t.reduce(function(e,t,o){return oe(e,t,we(t,n.offsetTree)||o)},ee());return P({},n,{groupIndices:t,groupOffsetTree:o})})),H),r(u(f,T(H),a(function(e){return e[0]<e[1].lastIndex}),g(function(e){var t=e[1];return[{startIndex:e[0],endIndex:t.lastIndex,size:t.lastSize}]})),d),r(v,I);var b=w(u(v,g(function(e){return void 0===e})),!0);r(u(I,a(function(e){return void 0!==e&&X(i(H).sizeTree)}),g(function(e){return[{startIndex:0,endIndex:0,size:e}]})),d);var R=l(u(d,T(H),C(function(e,t){var n=t[1];return{changed:n!==e.sizes,sizes:n}},{changed:!1,sizes:y}),g(function(e){return e.changed})));r(u(m,C(function(e,t){return{diff:e.prev-t,prev:t}},{diff:0,prev:0}),g(function(e){return e.diff}),a(function(e){return e>0})),h),c(u(m,T(t)),function(e){e[0]<0&&(0,e[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:m},D.ERROR)});var z=l(h);return r(u(h,T(H),g(function(e){var t=e[0],n=e[1];if(n.groupIndices.length>0)throw new Error("Virtuoso: prepending items does not work with groups");return ie(n.sizeTree).reduce(function(e,n){var o=n.k,r=n.v;return{ranges:[].concat(e.ranges,[{startIndex:e.prevIndex,endIndex:o+t-1,size:e.prevSize}]),prevIndex:o+t,prevSize:r}},{ranges:[],prevIndex:0,prevSize:n.lastSize}).ranges})),d),{data:S,totalCount:f,sizeRanges:d,groupIndices:p,defaultItemSize:I,fixedItemSize:v,unshiftWith:h,beforeUnshiftWith:z,firstItemIndex:m,sizes:H,listRefresh:R,trackItemSizes:b,itemSize:x}},d(j),{singleton:!0}),ze="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style;function ke(e){var t="number"==typeof e?{index:e}:e;return t.align||(t.align="start"),t.behavior&&ze||(t.behavior="auto"),t.offset||(t.offset=0),t}var Be=t(function(e){var t=e[0],i=t.sizes,l=t.totalCount,a=t.listRefresh,s=e[1],d=s.scrollingInProgress,f=s.viewportHeight,h=s.scrollTo,m=s.smoothScrollTargetReached,p=s.headerHeight,v=s.footerHeight,I=e[2].log,C=n(),S=o(0),w=null,H=null,b=null;function R(){w&&(w(),w=null),b&&(b(),b=null),H&&(clearTimeout(H),H=null),x(d,!1)}return r(u(C,T(i,f,l,S,p,v,I),g(function(e){var t=e[0],n=e[1],o=e[2],r=e[3],i=e[4],l=e[5],s=e[6],f=e[7],h=ke(t),p=h.align,v=h.behavior,g=h.offset,I=r-1,S=h.index;"LAST"===S&&(S=I),S=ye(S,n);var T=we(S=Math.max(0,S,Math.min(I,S)),n.offsetTree)+l;"end"===p?(T=Math.round(T-o+ne(n.sizeTree,S)[1]),S===I&&(T+=s)):"center"===p?T=Math.round(T-o/2+ne(n.sizeTree,S)[1]/2):T-=i,g&&(T+=g);var z=function(e){R(),e?(f("retrying to scroll to",{location:t},D.DEBUG),x(C,t)):f("list did not change, scroll successful",{},D.DEBUG)};if(R(),"smooth"===v){var k=!1;b=c(a,function(e){k=k||e}),w=y(m,function(){z(k)})}else w=y(u(a,function(e){var t=setTimeout(function(){e(!1)},50);return function(n){n&&(e(!0),clearTimeout(t))}}),z);return H=setTimeout(function(){R()},1200),x(d,!0),f("scrolling from index to",{index:S,top:T,behavior:v},D.DEBUG),{top:T,behavior:v}})),h),{scrollToIndex:C,topListHeight:S}},d(Re,U,j),{singleton:!0});function Ee(e,t,n){return"number"==typeof e?n===Y&&"top"===t||"down"===n&&"bottom"===t?e:0:n===Y?"top"===t?e.main:e.reverse:"bottom"===t?e.main:e.reverse}function Le(e,t){return"number"==typeof e?e:e[t]||0}var Oe=t(function(e){var t=e[0],r=t.scrollTop,i=t.viewportHeight,l=t.deviation,c=t.headerHeight,d=n(),f=o(0),m=o(0),p=o(0);return{listBoundary:d,overscan:p,topListHeight:f,increaseViewportBy:m,visibleRange:w(u(I(h(r),h(i),h(c),h(d,W),h(p),h(f),h(l),h(m)),g(function(e){var t=e[0],n=e[1],o=e[2],r=e[3],i=r[0],l=r[1],u=e[4],a=e[5],s=e[6],c=e[7],d=t-s,f=Math.max(o-d,0),h="none",m=Le(c,"top"),p=Le(c,"bottom");return i-=s,l+=o,(i+=o)>t+a-m&&(h=Y),(l-=s)<t-f+n+p&&(h="down"),"none"!==h?[Math.max(d-o-Ee(u,"top",h)-m,0),d-f+n+Ee(u,"bottom",h)+p]:null}),a(function(e){return null!=e}),s(W)),[0,0])}},d(U),{singleton:!0}),Me=t(function(e){var t=e[0],i=t.scrollTop,l=t.scrollTo,a=n(),s=n(),c=n(),d=o(!1);return r(u(I(s,a),g(function(e){return Math.max(0,e[0]-e[1].offsetTop)})),i),r(u(l,T(a),g(function(e){var t=e[0];return P({},t,{top:t.top+e[1].offsetTop})})),c),{useWindowScroll:d,windowScrollTop:s,windowViewportRect:a,windowScrollTo:c}},d(U)),Pe={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Ae={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Fe=Math.ceil,Ge=Math.floor,We=Math.min,Ve=Math.max;function Ne(e){return Fe(e)-e<.03?Fe(e):Ge(e)}function De(e,t){return Array.from({length:t-e+1}).map(function(t,n){return{index:n+e}})}var Ue=t(function(e){var t=e[0],i=t.overscan,c=t.visibleRange,d=t.listBoundary,f=e[1],m=f.scrollTop,v=f.viewportHeight,C=f.scrollBy,x=f.scrollTo,S=f.smoothScrollTargetReached,y=e[2],H=e[3],b=e[4],R=b.propsReady,z=b.didMount,k=e[5],B=k.windowViewportRect,E=k.windowScrollTo,L=k.useWindowScroll,O=k.windowScrollTop,M=o(0),A=o(0),F=o(Pe),G=o({height:0,width:0}),N=o({height:0,width:0}),D=n(),U=n();r(u(z,T(A),a(function(e){return 0!==e[1]}),g(function(e){return{items:De(0,e[1]-1),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),F),r(u(I(h(M),c,h(N,function(e,t){return e&&e.width===t.width&&e.height===t.height})),T(G),g(function(e){var t=e[0],n=t[0],o=t[1],r=o[0],i=o[1],l=t[2],u=e[1],a=l.height,s=l.width,c=u.width;if(0===n||0===c)return Pe;if(0===s)return Ae;var d=Ne(c/s),f=d*Ge(r/a),h=d*Fe(i/a)-1;h=We(n-1,h);var m=De(f=We(h,Ve(0,f)),h),p=_e(u,l,m),v=p.top,g=p.bottom;return{items:m,offsetTop:v,offsetBottom:Fe(n/d)*a-g,top:v,bottom:g,itemHeight:a,itemWidth:s}})),F),r(u(G,g(function(e){return e.height})),v),r(u(I(G,N,F),g(function(e){var t=_e(e[0],e[1],e[2].items);return[t.top,t.bottom]}),s(W)),d);var _=l(u(h(F),a(function(e){return e.items.length>0}),T(M),a(function(e){var t=e[0].items;return t[t.length-1].index===e[1]-1}),g(function(e){return e[1]-1}),s())),j=l(u(h(F),a(function(e){var t=e.items;return t.length>0&&0===t[0].index}),p(0),s())),K=l(u(h(F),a(function(e){return e.items.length>0}),g(function(e){var t=e.items;return{startIndex:t[0].index,endIndex:t[t.length-1].index}}),s(V)));r(K,H.scrollSeekRangeChanged),r(u(D,T(G,N,M),g(function(e){var t=e[1],n=e[2],o=e[3],r=ke(e[0]),i=r.align,l=r.behavior,u=r.offset,a=r.index;"LAST"===a&&(a=o-1);var s=je(t,n,a=Math.max(0,a,Math.min(o-1,a)));return"end"===i?s=Math.round(s-t.height+n.height):"center"===i&&(s=Math.round(s-t.height/2+n.height/2)),u&&(s+=u),{top:s,behavior:l}})),x);var Y=w(u(F,g(function(e){return e.offsetBottom+e.bottom})),0);return r(u(B,g(function(e){return{width:e.visibleWidth,height:e.visibleHeight}})),G),P({totalCount:M,viewportDimensions:G,itemDimensions:N,scrollTop:m,scrollHeight:U,overscan:i,scrollBy:C,scrollTo:x,scrollToIndex:D,smoothScrollTargetReached:S,windowViewportRect:B,windowScrollTo:E,useWindowScroll:L,windowScrollTop:O,initialItemCount:A},H,{gridState:F,totalListHeight:Y},y,{startReached:j,endReached:_,rangeChanged:K,propsReady:R})},d(Oe,U,q,$,K,Me));function _e(e,t,n){var o=t.height;return void 0===o||0===n.length?{top:0,bottom:0}:{top:je(e,t,n[0].index),bottom:je(e,t,n[n.length-1].index)+o}}function je(e,t,n){var o=Ne(e.width/t.width);return Ge(n/o)*t.height}function Ke(e,t){void 0===t&&(t=!0);var n=k(null),o=function(e){};if("undefined"!=typeof ResizeObserver){var r=new ResizeObserver(function(t){var n=t[0].target;null!==n.offsetParent&&e(n)});o=function(e){e&&t?(r.observe(e),n.current=e):(n.current&&r.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:o}}function Ye(e,t){return void 0===t&&(t=!0),Ke(e,t).callbackRef}function Ze(e){var t=k(null),n=B(function(n){if(null!==n){var o=n.getBoundingClientRect(),r=window.innerHeight-Math.max(0,o.top),i=o.top+window.pageYOffset;t.current={offsetTop:i,visibleHeight:r,visibleWidth:o.width},e(t.current)}},[e]),o=Ke(n),r=o.callbackRef,i=o.ref,l=B(function(){n(i.current)},[n,i]);return E(function(){return window.addEventListener("scroll",l),window.addEventListener("resize",l),function(){window.removeEventListener("scroll",l),window.removeEventListener("resize",l)}},[l]),r}var qe="undefined"!=typeof document?L:E;function $e(e,t,n,o,r){void 0===o&&(o=H),void 0===r&&(r=H);var i=k(null),l=k(null),u=k(null),a=B(function(n){var o=n.target,i=o===window||o===document?window.pageYOffset||document.documentElement.scrollTop:o.scrollTop,a=o===window?document.documentElement.scrollHeight:o.scrollHeight;r(a),e(Math.max(i,0)),null!==l.current&&(i===l.current||i<=0||i===o.scrollHeight-ge(o,"height"))&&(l.current=null,t(!0),u.current&&(clearTimeout(u.current),u.current=null))},[e,t,r]);return E(function(){var e=i.current;return o(i.current),a({target:e}),e.addEventListener("scroll",a,{passive:!0}),function(){o(null),e.removeEventListener("scroll",a)}},[i,a,n,o]),{scrollerRef:i,scrollByCallback:function(e){null===l.current&&i.current.scrollBy(e)},scrollToCallback:function(n){var o=i.current;if(o&&(!("offsetHeight"in o)||0!==o.offsetHeight)){var r,a,s,c="smooth"===n.behavior;if(o===window?(a=Math.max(ge(document.documentElement,"height"),document.documentElement.scrollHeight),r=window.innerHeight,s=document.documentElement.scrollTop):(a=o.scrollHeight,r=ge(o,"height"),s=o.scrollTop),n.top=Math.max(Math.min(a-r,n.top),0),Math.abs(r-a)<1.01||n.top===s)return e(s),void(c&&t(!0));c?(l.current=n.top,u.current&&clearTimeout(u.current),u.current=setTimeout(function(){u.current=null,l.current=null,t(!0)},1e3)):l.current=null,o.scrollTo(n)}}}}var Je=t(function(e){var t=e[0],n=t.sizes,i=t.listRefresh,l=t.defaultItemSize,s=e[1].scrollTop,d=e[2].scrollToIndex,f=e[3].didMount,h=o(!0),m=o(0);return r(u(f,T(m),a(function(e){return 0!==e[1]}),p(!1)),h),c(u(I(i,f),T(h,n,l),a(function(e){var t=e[1],n=e[3];return e[0][1]&&(!X(e[2].sizeTree)||void 0!==n)&&!t}),T(m)),function(e){var t=e[1];setTimeout(function(){y(s,function(){x(h,!0)}),x(d,t)})}),{scrolledToInitialItem:h,initialTopMostItemIndex:m}},d(Re,U,Be,K),{singleton:!0});function Qe(e){return!!e&&("smooth"===e?"smooth":"auto")}var Xe=t(function(e){var t=e[0],n=t.totalCount,r=t.listRefresh,l=e[1],s=l.isAtBottom,d=l.atBottomState,f=e[2].scrollToIndex,p=e[3].scrolledToInitialItem,v=e[4],S=v.propsReady,w=v.didMount,H=e[5].log,b=e[6].scrollingInProgress,R=o(!1),z=null;function k(e){x(f,{index:"LAST",align:"end",behavior:e})}return c(u(I(u(h(n),m(1)),w),T(h(R),s,p,b),g(function(e){var t=e[0],n=t[0],o=t[1]&&e[3],r="auto";return o&&(r=function(e,t){return"function"==typeof e?Qe(e(t)):t&&Qe(e)}(e[1],e[2]||e[4]),o=o&&!!r),{totalCount:n,shouldFollow:o,followOutputBehavior:r}}),a(function(e){return e.shouldFollow})),function(e){var t=e.totalCount,n=e.followOutputBehavior;z&&(z(),z=null),z=y(r,function(){i(H)("following output to ",{totalCount:t},D.DEBUG),k(n),z=null})}),c(u(I(h(R),n,S),a(function(e){return e[0]&&e[2]}),C(function(e,t){var n=t[1];return{refreshed:e.value===n,value:n}},{refreshed:!1,value:0}),a(function(e){return e.refreshed}),T(R,n)),function(e){var t=e[1],n=y(d,function(e){!t||e.atBottom||"SIZE_INCREASED"!==e.notAtBottomBecause||z||(i(H)("scrolling to bottom due to increased size",D.DEBUG),k("auto"))});setTimeout(n,100)}),c(I(h(R),d),function(e){var t=e[1];e[0]&&!t.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===t.notAtBottomBecause&&k("auto")}),{followOutput:R}},d(Re,q,Be,Je,K,j,U));function et(e){return e.reduce(function(e,t){return e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e},{totalCount:0,groupIndices:[]})}var tt=t(function(e){var t=e[0],o=t.totalCount,i=t.groupIndices,c=t.sizes,d=e[1],f=d.scrollTop,h=d.headerHeight,m=n(),p=n(),v=l(u(m,g(et)));return r(u(v,g(b("totalCount"))),o),r(u(v,g(b("groupIndices"))),i),r(u(I(f,c,h),a(function(e){return He(e[1])}),g(function(e){return ne(e[1].groupOffsetTree,Math.max(e[0]-e[2],0),"v")[0]}),s(),g(function(e){return[e]})),p),{groupCounts:m,topItemsIndexes:p}},d(Re,U)),nt={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0};function ot(e,t,n){if(0===e.length)return[];if(!He(t))return e.map(function(e){return P({},e,{index:e.index+n,originalIndex:e.index})});for(var o,r=[],i=de(t.groupOffsetTree,e[0].index,e[e.length-1].index),l=void 0,u=0,a=G(e);!(o=a()).done;){var s=o.value;(!l||l.end<s.index)&&(l=i.shift(),u=t.groupIndices.indexOf(l.start)),r.push(P({},s.index===l.start?{type:"group",index:u}:{index:s.index-(u+1)+n,groupIndex:u},{size:s.size,offset:s.offset,originalIndex:s.index,data:s.data}))}return r}function rt(e,t,n,o,r){var i=0,l=0;if(e.length>0){i=e[0].offset;var u=e[e.length-1];l=u.offset+u.size}var a=i,s=o.lastOffset+(n-o.lastIndex)*o.lastSize-l;return{items:ot(e,o,r),topItems:ot(t,o,r),topListHeight:t.reduce(function(e,t){return t.size+e},0),offsetTop:i,offsetBottom:s,top:a,bottom:l,totalCount:n}}var it,lt,ut,at=t(function(e){var t=e[0],i=t.sizes,c=t.totalCount,d=t.data,f=t.firstItemIndex,m=e[1],p=e[2],v=p.visibleRange,C=p.listBoundary,x=p.topListHeight,y=e[3],H=y.scrolledToInitialItem,z=y.initialTopMostItemIndex,k=e[4].topListHeight,B=e[5],E=e[6].didMount,L=o([]),O=n();r(m.topItemsIndexes,L);var M=w(u(I(E,h(v),h(c),h(i),h(z),H,h(L),h(f),d),a(function(e){return e[0]}),g(function(e){var t=e[1],n=t[0],o=t[1],r=e[2],i=e[4],l=e[5],u=e[6],a=e[7],s=e[8],c=e[3],d=c.sizeTree,f=c.offsetTree;if(0===r||0===n&&0===o)return nt;if(X(d))return rt(function(e,t,n){if(He(t)){var o=ye(e,t);return[{index:ne(t.groupOffsetTree,o)[0],size:0,offset:0},{index:o,size:0,offset:0,data:n&&n[0]}]}return[{index:e,size:0,offset:0,data:n&&n[0]}]}(i,c,s),[],r,c,a);var h=[];if(u.length>0)for(var m,p=u[0],v=u[u.length-1],g=0,I=G(de(d,p,v));!(m=I()).done;)for(var C=m.value,x=C.value,S=Math.max(C.start,p),T=Math.min(C.end,v),w=S;w<=T;w++)h.push({index:w,size:x,offset:g,data:s&&s[w]}),g+=x;if(!l)return rt([],h,r,c,a);var y=u.length>0?u[u.length-1]+1:0,H=function(e,t,n,o){return void 0===o&&(o=0),o>0&&(t=Math.max(t,ve(e,o,Ce).offset)),fe((i=n,u=pe(r=e,t,l=xe),a=pe(r,i,l,u),r.slice(u,a+1)),Se);var r,i,l,u,a}(f,n,o,y);if(0===H.length)return null;var b=r-1;return rt(R([],function(e){for(var t,r=G(H);!(t=r()).done;){var i=t.value,l=i.value,u=l.offset,a=i.start,c=l.size;l.offset<n&&(u+=((a+=Math.floor((n-l.offset)/c))-i.start)*c),a<y&&(u+=(y-a)*c,a=y);for(var d=Math.min(i.end,b),f=a;f<=d&&!(u>=o);f++)e.push({index:f,size:c,offset:u,data:s&&s[f]}),u+=c}}),h,r,c,a)}),a(function(e){return null!==e}),s()),nt);return r(u(d,a(function(e){return void 0!==e}),g(function(e){return e.length})),c),r(u(M,g(b("topListHeight"))),k),r(k,x),r(u(M,g(function(e){return[e.top,e.bottom]})),C),r(u(M,g(function(e){return e.items})),O),P({listState:M,topItemsIndexes:L,endReached:l(u(M,a(function(e){return e.items.length>0}),T(c,d),a(function(e){var t=e[0].items;return t[t.length-1].originalIndex===e[1]-1}),g(function(e){return[e[1]-1,e[2]]}),s(W),g(function(e){return e[0]}))),startReached:l(u(M,S(200),a(function(e){var t=e.items;return t.length>0&&t[0].originalIndex===e.topItems.length}),g(function(e){return e.items[0].index}),s())),rangeChanged:l(u(M,a(function(e){return e.items.length>0}),g(function(e){var t=e.items;return{startIndex:t[0].index,endIndex:t[t.length-1].index}}),s(V))),itemsRendered:O},B)},d(Re,tt,Oe,Je,Be,q,K),{singleton:!0}),st=t(function(e){var t=e[0],n=t.sizes,i=t.firstItemIndex,l=t.data,s=e[1].listState,c=e[2].didMount,d=o(0);return r(u(c,T(d),a(function(e){return 0!==e[1]}),T(n,i,l),g(function(e){var t=e[0][1],n=e[1],o=e[2],r=e[3],i=void 0===r?[]:r,l=0;if(n.groupIndices.length>0)for(var u,a=G(n.groupIndices);!((u=a()).done||u.value-l>=t);)l++;var s=t+l;return rt(Array.from({length:s}).map(function(e,t){return{index:t,size:0,offset:0,data:i[t]}}),[],s,n,o)})),s),{initialItemCount:d}},d(Re,at,K),{singleton:!0}),ct=t(function(e){var t=e[0].topItemsIndexes,n=o(0);return r(u(n,a(function(e){return e>0}),g(function(e){return Array.from({length:e}).map(function(e,t){return t})})),t),{topItemCount:n}},d(at)),dt=t(function(e){var t=e[0],o=t.footerHeight,i=t.headerHeight,l=e[1].listState,a=n(),s=w(u(I(o,i,l),g(function(e){var t=e[2];return e[0]+e[1]+t.offsetBottom+t.bottom})),0);return r(h(s),a),{totalListHeight:s,totalListHeightChanged:a}},d(U,at),{singleton:!0}),ft=t(function(e){var t=e[0],n=t.scrollBy,o=t.scrollTop,i=t.deviation,s=t.scrollingInProgress,d=e[1],f=d.isScrolling,h=d.isAtBottom,m=d.scrollDirection,p=e[3],v=p.beforeUnshiftWith,y=p.sizes,H=e[4].log,b=l(u(e[2].listState,C(function(e,t){var n=e[1],o=t.items,r=0;if(n.length>0&&o.length>0){var i=o[0].originalIndex,l=n[0].originalIndex;if(0!==i||0!==l)if(i===l)r=o[0].size-n[0].size;else for(var u=function(e){var t=o[e],i=n.find(function(e){return e.originalIndex===t.originalIndex});return i?t.offset!==i.offset?(r=t.offset-i.offset,"break"):void 0:"continue"},a=o.length-1;a>=0;a--){var s=u(a);if("continue"!==s&&"break"===s)break}}return[r,o]},[0,[]]),a(function(e){return 0!==e[0]}),T(o,m,s,H,h),a(function(e){return!e[3]&&0!==e[1]&&e[2]===Y&&(!e[5]||e[0][0]>0)}),g(function(e){var t=e[0][0];return(0,e[4])("Upward scrolling compensation",{amount:t},D.DEBUG),t})));return r(u(b,T(i),g(function(e){return e[1]-e[0]})),i),c(u(I(w(f,!1),i),a(function(e){return!e[0]&&0!==e[1]}),g(function(e){return e[1]}),S(1)),function(e){e>0?(x(n,{top:-e,behavior:"auto"}),x(i,0)):(x(i,0),x(n,{top:-e,behavior:"auto"}))}),r(u(v,T(y),g(function(e){return e[0]*e[1].lastSize})),b),{deviation:i}},d(U,q,at,Re,j)),ht=t(function(e){var t=e[0].totalListHeight,n=e[1].didMount,r=e[2].scrollTo,i=o(0);return c(u(n,T(i),a(function(e){return 0!==e[1]}),g(function(e){return{top:e[1]}})),function(e){y(u(t,a(function(e){return 0!==e})),function(){setTimeout(function(){x(r,e)})})}),{initialScrollTop:i}},d(dt,K,U),{singleton:!0}),mt=t(function(e){var t=e[0].viewportHeight,n=e[1].totalListHeight,r=o(!1);return{alignToBottom:r,paddingTopAddition:w(u(I(r,t,n),a(function(e){return e[0]}),g(function(e){return Math.max(0,e[1]-e[2])}),s()),0)}},d(U,dt),{singleton:!0}),pt=t(function(e){var t=e[0],o=t.sizes,i=t.totalCount,l=e[1],s=l.scrollTop,c=l.viewportHeight,d=l.headerHeight,f=l.scrollingInProgress,h=e[2].scrollToIndex,p=n();return r(u(p,T(o,c,i,d,s),g(function(e){var t=e[0],n=t.index,o=t.behavior,r=void 0===o?"auto":o,i=t.done,l=e[1],s=e[2],c=e[4],d=e[5],h=e[3]-1,p=null;n=ye(n,l);var v=we(n=Math.max(0,n,Math.min(h,n)),l.offsetTree)+c;return v<d?p={index:n,behavior:r,align:"start"}:v+ne(l.sizeTree,n)[1]>d+s&&(p={index:n,behavior:r,align:"end"}),p?i&&y(u(f,m(1),a(function(e){return!1===e})),i):i&&i(),p}),a(function(e){return null!==e})),h),{scrollIntoView:p}},d(Re,U,Be,at,j),{singleton:!0}),vt=t(function(e){return P({},e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},d(Oe,st,K,$,dt,ht,mt,Me,pt)),gt=t(function(e){var t=e[0],n=t.totalCount,o=t.sizeRanges,i=t.fixedItemSize,l=t.defaultItemSize,a=t.trackItemSizes,s=t.itemSize,c=t.data,d=t.firstItemIndex,f=t.groupIndices,h=e[1],m=h.initialTopMostItemIndex,p=h.scrolledToInitialItem,v=e[2],I=e[3],C=e[4],x=C.listState,S=C.topItemsIndexes,T=A(C,["listState","topItemsIndexes"]),w=e[5].scrollToIndex,y=e[7].topItemCount,H=e[8].groupCounts,R=e[9],z=e[10];return r(T.rangeChanged,R.scrollSeekRangeChanged),r(u(R.windowViewportRect,g(b("visibleHeight"))),v.viewportHeight),P({totalCount:n,data:c,firstItemIndex:d,sizeRanges:o,initialTopMostItemIndex:m,scrolledToInitialItem:p,topItemsIndexes:S,topItemCount:y,groupCounts:H,fixedItemHeight:i,defaultItemHeight:l},I,{listState:x,scrollToIndex:w,trackItemSizes:a,itemSize:s,groupIndices:f},T,R,v,z)},d(Re,Je,U,Xe,at,Be,ft,ct,tt,vt,j)),It=(it=function(){if("undefined"==typeof document)return"sticky";var e=document.createElement("div");return e.style.position="-webkit-sticky","-webkit-sticky"===e.style.position?"-webkit-sticky":"sticky"},ut=!1,function(){return ut||(ut=!0,lt=it()),lt});function Ct(e){return e}var xt=t(function(){var e=o(function(e){return"Item "+e}),t=o(function(e){return"Group "+e}),n=o({}),r=o(Ct),i=o("div"),l=o(H),a=function(e,t){return void 0===t&&(t=null),w(u(n,g(function(t){return t[e]}),s()),t)};return{itemContent:e,groupContent:t,components:n,computeItemKey:r,headerFooterTag:i,scrollerRef:l,FooterComponent:a("Footer"),HeaderComponent:a("Header"),TopItemListComponent:a("TopItemList"),ListComponent:a("List","div"),ItemComponent:a("Item","div"),GroupComponent:a("Group","div"),ScrollerComponent:a("Scroller","div"),EmptyPlaceholder:a("EmptyPlaceholder"),ScrollSeekPlaceholder:a("ScrollSeekPlaceholder")}});function St(e,t){var o=n();return c(o,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+t,"color: red;","color: inherit;","color: blue;")}),r(o,e),o}var Tt=t(function(e){var t=e[0],o=e[1],l={item:St(o.itemContent,"Rename the %citem%c prop to %citemContent."),group:St(o.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:St(t.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:St(t.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:St(t.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:n(),maxHeightCacheSize:n(),footer:n(),header:n(),HeaderContainer:n(),FooterContainer:n(),ItemContainer:n(),ScrollContainer:n(),GroupContainer:n(),ListContainer:n(),emptyComponent:n(),scrollSeek:n()};function a(e,t,n){r(u(e,T(o.components),g(function(e){var o,r=e[0],i=e[1];return console.warn("react-virtuoso: "+n+" property is deprecated. Pass components."+t+" instead."),P({},i,((o={})[t]=r,o))})),o.components)}return c(l.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),c(l.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),c(l.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),c(l.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),c(l.scrollSeek,function(e){var n=e.placeholder,r=A(e,["placeholder"]);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),x(o.components,P({},i(o.components),{ScrollSeekPlaceholder:n})),x(t.scrollSeekConfiguration,r)}),a(l.footer,"Footer","footer"),a(l.header,"Header","header"),a(l.ItemContainer,"Item","ItemContainer"),a(l.ListContainer,"List","ListContainer"),a(l.ScrollContainer,"Scroller","ScrollContainer"),a(l.emptyComponent,"EmptyPlaceholder","emptyComponent"),a(l.GroupContainer,"Group","GroupContainer"),P({},t,o,l)},d(gt,xt)),wt=function(e){return M("div",{style:{height:e.height}})},yt={position:It(),zIndex:1},Ht=O(function(e){var t=e.showTopList,n=void 0!==t&&t,o=Wt("listState"),r=Wt("deviation"),i=Gt("sizeRanges"),l=Gt("scrollHeight"),u=Wt("itemContent"),a=Wt("groupContent"),s=Wt("trackItemSizes"),c=Wt("itemSize"),d=Wt("log"),f=function(e,t,n,o,r){return Ye(function(n){var i=function(e,t,n,o){var r=e.length;if(0===r)return null;for(var i=[],l=0;l<r;l++){var u=e.item(l);if(u&&void 0!==u.dataset.index){var a=parseInt(u.dataset.index),s=parseFloat(u.dataset.knownSize),c=t(u,"offsetHeight");if(0===c&&o("Zero-sized element, this should not happen",{child:u},D.ERROR),c!==s){var d=i[i.length-1];0===i.length||d.size!==c||d.endIndex!==a-1?i.push({startIndex:a,endIndex:a,size:c}):i[i.length-1].endIndex++}}}return i}(n.children,t,0,r);o(n.parentElement.parentElement.scrollHeight),null!==i&&e(i)},n)}(i,c,s,n?H:l,d),h=Wt("EmptyPlaceholder"),m=Wt("ScrollSeekPlaceholder")||wt,p=Wt("ListComponent"),v=Wt("ItemComponent"),g=Wt("GroupComponent"),I=Wt("computeItemKey"),C=Wt("isSeeking"),x=Wt("groupIndices").length>0,S=Wt("paddingTopAddition"),T=Wt("scrolledToInitialItem"),w=Wt("firstItemIndex"),y=n?{}:{boxSizing:"border-box",paddingTop:o.offsetTop+S,paddingBottom:o.offsetBottom,marginTop:r};return!n&&0===o.items.length&&h&&T?M(h):M(p,{ref:f,style:y,"data-test-id":n?"virtuoso-top-item-list":"virtuoso-item-list"},(n?o.topItems:o.items).map(function(e){var t=e.originalIndex,n=I(t+w,e.data);return C?M(m,{key:n,index:e.index,height:e.size}):"group"===e.type?M(g,{key:n,"data-index":t,"data-known-size":e.size,"data-item-index":e.index,style:yt},a(e.index)):M(v,{key:n,"data-index":t,"data-known-size":e.size,"data-item-index":e.index,"data-item-group-index":e.groupIndex,style:{overflowAnchor:"none"}},x?u(e.index,e.groupIndex,e.data):u(e.index,e.data))}))}),bt={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Rt={width:"100%",height:"100%",position:"absolute",top:0},zt={width:"100%",position:It(),top:0},kt=O(function(){var e=Wt("HeaderComponent"),t=Gt("headerHeight"),n=Wt("headerFooterTag"),o=Ye(function(e){return t(ge(e,"height"))});return e?M(n,{ref:o},M(e)):null}),Bt=O(function(){var e=Wt("FooterComponent"),t=Gt("footerHeight"),n=Wt("headerFooterTag"),o=Ye(function(e){return t(ge(e,"height"))});return e?M(n,{ref:o},M(e)):null});function Et(e){var t=e.usePublisher,n=e.useEmitter,o=e.useEmitterValue;return O(function(e){var r=e.style,i=e.children,l=A(e,["style","children"]),u=t("scrollTop"),a=t("scrollHeight"),s=o("ScrollerComponent"),c=$e(u,t("smoothScrollTargetReached"),s,o("scrollerRef"),a),d=c.scrollerRef,f=c.scrollByCallback;return n("scrollTo",c.scrollToCallback),n("scrollBy",f),M(s,P({ref:d,style:P({},bt,r),tabIndex:0},l),i)})}function Lt(e){var t=e.usePublisher,n=e.useEmitter,o=e.useEmitterValue;return O(function(e){var r=e.style,i=e.children,l=A(e,["style","children"]),u=t("windowScrollTop"),a=t("scrollHeight"),s=o("ScrollerComponent"),c=t("smoothScrollTargetReached"),d=o("totalListHeight"),f=$e(u,c,s,H,a),h=f.scrollerRef,m=f.scrollByCallback,p=f.scrollToCallback;return qe(function(){return h.current=window,function(){h.current=null}},[h]),n("windowScrollTo",p),n("scrollBy",m),M(s,P({style:P({position:"relative"},r,0!==d?{height:d}:{})},l),i)})}var Ot=function(e){var t=e.children,n=Gt("viewportHeight"),o=Ye(z(n,function(e){return ge(e,"height")}));return M("div",{style:Rt,ref:o},t)},Mt=function(e){var t=e.children,n=Ze(Gt("windowViewportRect"));return M("div",{ref:n,style:Rt},t)},Pt=function(e){var t=e.children,n=Wt("TopItemListComponent"),o=Wt("headerHeight"),r=P({},zt,{marginTop:o+"px"});return M(n||"div",{style:r},t)},At=e(Tt,{required:{},optional:{followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",scrollerRef:"scrollerRef",logLevel:"logLevel",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},O(function(e){var t=Wt("useWindowScroll"),n=Wt("topItemsIndexes").length>0,o=t?Mt:Ot;return M(t?Dt:Nt,P({},e),M(o,null,M(kt,null),M(Ht,null),M(Bt,null)),n&&M(Pt,null,M(Ht,{showTopList:!0})))})),Ft=At.Component,Gt=At.usePublisher,Wt=At.useEmitterValue,Vt=At.useEmitter,Nt=Et({usePublisher:Gt,useEmitterValue:Wt,useEmitter:Vt}),Dt=Lt({usePublisher:Gt,useEmitterValue:Wt,useEmitter:Vt}),Ut=t(function(){var e=o(function(e){return"Item "+e}),t=o({}),n=o("virtuoso-grid-item"),r=o("virtuoso-grid-list"),i=o(Ct),l=o(H),a=function(e,n){return void 0===n&&(n=null),w(u(t,g(function(t){return t[e]}),s()),n)};return{itemContent:e,components:t,computeItemKey:i,itemClassName:n,listClassName:r,scrollerRef:l,ListComponent:a("List","div"),ItemComponent:a("Item","div"),ScrollerComponent:a("Scroller","div"),ScrollSeekPlaceholder:a("ScrollSeekPlaceholder","div")}}),_t=t(function(e){var t=e[0],o=e[1],l={item:St(o.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:n(),ScrollContainer:n(),ListContainer:n(),emptyComponent:n(),scrollSeek:n()};function a(e,t,n){r(u(e,T(o.components),g(function(e){var o,r=e[0],i=e[1];return console.warn("react-virtuoso: "+n+" property is deprecated. Pass components."+t+" instead."),P({},i,((o={})[t]=r,o))})),o.components)}return c(l.scrollSeek,function(e){var n=e.placeholder,r=A(e,["placeholder"]);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),x(o.components,P({},i(o.components),{ScrollSeekPlaceholder:n})),x(t.scrollSeekConfiguration,r)}),a(l.ItemContainer,"Item","ItemContainer"),a(l.ListContainer,"List","ListContainer"),a(l.ScrollContainer,"Scroller","ScrollContainer"),P({},t,o,l)},d(Ue,Ut)),jt=O(function(){var e=Jt("gridState"),t=Jt("listClassName"),n=Jt("itemClassName"),o=Jt("itemContent"),r=Jt("computeItemKey"),i=Jt("isSeeking"),l=$t("scrollHeight"),u=Jt("ItemComponent"),a=Jt("ListComponent"),s=Jt("ScrollSeekPlaceholder"),c=$t("itemDimensions"),d=Ye(function(e){l(e.parentElement.parentElement.scrollHeight);var t=e.firstChild;t&&c(t.getBoundingClientRect())});return M(a,{ref:d,className:t,style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom}},e.items.map(function(t){var l=r(t.index);return i?M(s,{key:l,index:t.index,height:e.itemHeight,width:e.itemWidth}):M(u,{className:n,"data-index":t.index,key:l},o(t.index))}))}),Kt=function(e){var t=e.children,n=$t("viewportDimensions"),o=Ye(function(e){n(e.getBoundingClientRect())});return M("div",{style:Rt,ref:o},t)},Yt=function(e){var t=e.children,n=Ze($t("windowViewportRect"));return M("div",{ref:n,style:Rt},t)},Zt=e(_t,{optional:{totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},O(function(e){var t=P({},e),n=Jt("useWindowScroll"),o=n?Yt:Kt;return M(n?en:Xt,P({},t),M(o,null,M(jt,null)))})),qt=Zt.Component,$t=Zt.usePublisher,Jt=Zt.useEmitterValue,Qt=Zt.useEmitter,Xt=Et({usePublisher:$t,useEmitterValue:Jt,useEmitter:Qt}),en=Lt({usePublisher:$t,useEmitterValue:Jt,useEmitter:Qt}),tn=Ft,nn=Ft,on=qt;export{nn as GroupedVirtuoso,D as LogLevel,tn as Virtuoso,on as VirtuosoGrid};
//# sourceMappingURL=index.m.js.map
