{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\QQMerged\\\\ClientApp\\\\src\\\\components\\\\GeneralQueue.jsx\";\nimport React, { Component } from 'react';\nimport { Container, Row, Col, Spinner } from 'reactstrap';\nimport Cookies from 'js-cookie';\nimport { Virtuoso } from 'react-virtuoso';\nimport CustomScrollbar from \"./CustomScroller\";\nimport \"overlayscrollbars/css/OverlayScrollbars.css\";\nimport './GeneralQueue.scss';\nimport { Redirect, withRouter } from \"react-router-dom\";\nimport { AppContext } from './AppContext.jsx';\nimport { HubConnection } from '@aspnet/signalr-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class GeneralQueue extends Component {\n  constructor(props) {\n    super(props);\n    this.intervalID = 0;\n    this.state = {\n      qname: \"\",\n      queue: [],\n      qonline: true,\n      loading: true,\n      id: this.props.match.params.id,\n      isOdmen: false,\n      redirect: false,\n      clicker: 0,\n      clickercolor: Math.floor(Math.random() * 270) + 60,\n      isInQueue: false,\n      placeInQueue: 0,\n      userId: sessionStorage.getItem('id'),\n      hubConnection: null\n    };\n    this.handleNext = this.handleNext.bind(this);\n    this.click = this.click.bind(this);\n    this.handleFreeze = this.handleFreeze.bind(this);\n    this.handleJoin = this.handleJoin.bind(this);\n    this.getQ = this.getQ.bind(this);\n    this.click = this.click.bind(this);\n  }\n\n  componentDidMount() {\n    this.getQ();\n    this.qupdate();\n    this.intervalID = setInterval(() => {\n      this.qupdate();\n    }, 3000);\n    const hubConnection = new HubConnection('http://localhost:5000/queue');\n    this.setState({\n      hubConnection\n    }, () => {\n      this.state.hubConnection.start().then(() => console.log('Connection started!')).catch(err => console.log('Error while establishing connection :('));\n    });\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalID);\n  }\n\n  async getQ() {\n    if (Cookies.get('JWT') != null) {\n      const token = \"Bearer \" + Cookies.get('JWT');\n      const qrequestOptions = {\n        method: 'GET',\n        headers: {\n          'Authorization': token\n        }\n      };\n      const qownresp = await fetch(`IOwner/${this.state.id}`, qrequestOptions);\n\n      if (qownresp.ok) {\n        const qown = await qownresp.json();\n        this.setState({\n          isOdmen: qown\n        });\n      }\n\n      const qresponse = await fetch(`event/${this.state.id}`, qrequestOptions);\n\n      if (qresponse.ok) {\n        const qdata = await qresponse.json();\n        this.setState({\n          qname: qdata[\"title\"],\n          qonline: !qdata[\"isSuspended\"],\n          loading: false\n        });\n      }\n    } else {\n      this.setState({\n        redirect: true\n      });\n    }\n  }\n\n  async handleNext() {\n    if (this.state.isOdmen) {\n      const token = \"Bearer \" + Cookies.get('JWT');\n      const requestOptions = {\n        method: 'PUT',\n        headers: {\n          'Authorization': token\n        }\n      };\n      const response = await fetch(`/queue/${this.state.id}/moder/next`, requestOptions);\n\n      if (response.ok) {\n        this.qupdate();\n      }\n    } else {\n      this.setState({\n        redirect: true\n      });\n    }\n  }\n\n  async handleFreeze() {\n    if (this.state.isOdmen) {\n      const token = \"Bearer \" + Cookies.get('JWT');\n      const requestOptions = {\n        method: 'PUT',\n        headers: {\n          'Authorization': token\n        }\n      };\n\n      if (this.state.qonline) {\n        const response = await fetch(`/queue/${this.state.id}/moder/close`, requestOptions);\n\n        if (response.ok) {\n          this.qupdate();\n        }\n      } else {\n        const response = await fetch(`/queue/${this.state.id}/moder/open`, requestOptions);\n\n        if (response.ok) {\n          this.qupdate();\n        }\n      }\n    } else {\n      this.setState({\n        redirect: true\n      });\n    }\n  }\n\n  async qupdate() {\n    if (Cookies.get('JWT') != null) {\n      const token = \"Bearer \" + Cookies.get('JWT');\n      const qrequestOptions = {\n        method: 'GET',\n        headers: {\n          'Authorization': token\n        }\n      };\n      const qownresp = await fetch(`IOwner/${this.state.id}`, qrequestOptions);\n\n      if (qownresp.ok) {\n        const qown = await qownresp.json();\n        this.setState({\n          isOdmen: qown\n        });\n      }\n\n      const qresponse = await fetch(`event/${this.state.id}`, qrequestOptions);\n\n      if (qresponse.ok) {\n        const qdata = await qresponse.json();\n        this.setState({\n          qname: qdata[\"title\"],\n          qonline: !qdata[\"isSuspended\"]\n        });\n      }\n\n      const qlistresponse = await fetch(`get_queue/${this.state.id}`, qrequestOptions);\n\n      if (qlistresponse.ok) {\n        const qlist = await qlistresponse.json();\n        this.setState({\n          placeInQueue: 0\n        });\n\n        for (var i = 0; i < qlist.length; i++) {\n          if (qlist[i].idUser == this.state.userId) {\n            this.setState({\n              isInQueue: true,\n              placeInQueue: i + 1\n            });\n          }\n\n          ;\n        }\n        /*qlist.push({eventId: -1, id: -1, idUser: -1, number: -1, status: \"\", time_queue: \"\", username: \"\"});*/\n\n\n        this.setState({\n          queue: qlist\n        });\n      }\n    } else {\n      this.setState({\n        redirect: true\n      });\n    }\n  }\n\n  click() {\n    let color = this.state.clickercolor;\n\n    if (color >= 360) {\n      color = 0;\n    }\n\n    this.setState({\n      clicker: this.state.clicker + 1,\n      clickercolor: color + 1\n    });\n  }\n\n  async handleJoin() {\n    if (!this.state.isOdmen) {\n      const token = \"Bearer \" + Cookies.get('JWT');\n      const requestOptions = {\n        method: 'POST',\n        headers: {\n          'Authorization': token\n        }\n      };\n\n      if (!this.state.isInQueue) {\n        const response = await fetch(`/queue/enter/${this.state.id}`, requestOptions);\n\n        if (response.ok) {\n          this.setState({\n            isInQueue: true\n          });\n          this.qupdate();\n        }\n      } else {\n        requestOptions[\"method\"] = 'DELETE';\n        const response = await fetch(`/queue/delete/${this.state.id}`, requestOptions);\n\n        if (response.ok) {\n          this.setState({\n            isInQueue: false\n          });\n          this.qupdate();\n        }\n      }\n    } else {\n      this.setState({\n        redirect: true\n      });\n    }\n  }\n\n  render() {\n    let queue = this.state.queue;\n    let qname = this.state.qname;\n    let qsize = this.state.queue.length;\n    let qid = this.state.id;\n    let clicker = this.state.clicker;\n    let isOdmen = this.state.isOdmen;\n    let qstate = this.state.qonline;\n    let place = this.state.placeInQueue;\n    let inQ = this.state.isInQueue;\n    let color = this.state.clickercolor;\n\n    const Button1 = () => {\n      if (isOdmen) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"next_button\",\n          onClick: this.handleNext,\n          children: \"NEXT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 24\n        }, this);\n      } else {\n        if (inQ) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              backgroundColor: \"#E87C64\"\n            },\n            className: \"join_button\",\n            onClick: this.handleJoin,\n            children: \"LEAVE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 28\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"join_button\",\n            onClick: this.handleJoin,\n            children: \"JOIN\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 28\n          }, this);\n        }\n      }\n    };\n\n    const Button2 = () => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ppl_inqueue\",\n        children: qsize\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 20\n      }, this);\n    };\n\n    const Button3 = () => {\n      if (isOdmen) {\n        if (qstate) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"freeze_button\",\n            onClick: this.handleFreeze,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/freeze.svg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 87\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 28\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              backgroundColor: \"#CCCCCC\"\n            },\n            className: \"freeze_button\",\n            onClick: this.handleFreeze,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/freeze.svg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 124\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 28\n          }, this);\n        }\n      } else {\n        if (inQ) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"your_place\",\n            children: [\"You\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 59\n            }, this), place]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 28\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"your_place\",\n            children: \"You\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 28\n          }, this);\n        }\n      }\n    };\n\n    const clickerColor = () => {\n      const colorStr = \"hsl(\" + color + \", 90%, 65%)\";\n\n      if (clicker <= 0) {\n        return {\n          backgroundColor: colorStr,\n          fontSize: '3vw'\n        };\n      } else {\n        return {\n          backgroundColor: colorStr\n        };\n      }\n    };\n\n    const Button4 = () => {\n      if (clicker > 0) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"clicker\",\n          style: clickerColor(),\n          onClick: this.click,\n          children: clicker\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 24\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"clicker\",\n          style: clickerColor(),\n          onClick: this.click,\n          children: \"Click!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 24\n        }, this);\n      }\n    };\n\n    if (this.state.redirect) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        push: true,\n        to: `/`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 21\n      }, this);\n    }\n\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinnerDiv\",\n        children: /*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"border\",\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 49\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 21\n      }, this);\n    }\n\n    const listElement = index => {\n      if (index == 0) {\n        return {\n          backgroundColor: \"#82FF9D\"\n        };\n      } else if (index == place - 1) {\n        return {\n          backgroundColor: \"#EDB734\"\n        };\n      }\n      /*else if (index == qsize - 1) {\r\n          return { visibility: \"hidden\" };\r\n      }*/\n      else {\n        return {\n          backgroundColor: \"white\"\n        };\n      }\n    };\n\n    return /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main_block\",\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"queue_name\",\n            children: /*#__PURE__*/_jsxDEV(Row, {\n              style: {\n                width: \"100%\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                xs: \"9\",\n                className: \"queue_name_col\",\n                children: qname\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                xs: \"3\",\n                className: \"col3_custom\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"copy_link_button\",\n                  onClick: () => {\n                    navigator.clipboard.writeText(`${this.state.id}`);\n                  },\n                  \"data-toggle\": \"tooltip\",\n                  \"data-placement\": \"top\",\n                  title: \"Copy queue link\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"/link.svg\",\n                    alt: \"\",\n                    height: \"100%\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 297,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    backgroundColor: qstate ? \"#82FF9D\" : \"#CCCCCC\"\n                  },\n                  className: \"queue_state\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"queue_block\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            sm: \"8\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"queue\",\n              children: /*#__PURE__*/_jsxDEV(Virtuoso, {\n                components: {\n                  Scroller: CustomScrollbar\n                },\n                className: \"QList\",\n                data: queue,\n                itemContent: (index, Queue) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"QItem\",\n                  style: listElement(index),\n                  children: Queue.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 316,\n                  columnNumber: 68\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: \"4\",\n            children: /*#__PURE__*/_jsxDEV(Row, {\n              className: \"buttons\",\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                sm: \"6\",\n                className: \"button\",\n                children: Button1()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                sm: \"6\",\n                className: \"button\",\n                children: Button2()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                sm: \"6\",\n                className: \"button\",\n                children: Button3()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                sm: \"6\",\n                className: \"button\",\n                children: Button4()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nGeneralQueue.displayName = GeneralQueue.name;\nGeneralQueue.contextType = AppContext;\nexport default _c = withRouter(GeneralQueue);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["D:/project/QQMerged/ClientApp/src/components/GeneralQueue.jsx"],"names":["React","Component","Container","Row","Col","Spinner","Cookies","Virtuoso","CustomScrollbar","Redirect","withRouter","AppContext","HubConnection","GeneralQueue","constructor","props","intervalID","state","qname","queue","qonline","loading","id","match","params","isOdmen","redirect","clicker","clickercolor","Math","floor","random","isInQueue","placeInQueue","userId","sessionStorage","getItem","hubConnection","handleNext","bind","click","handleFreeze","handleJoin","getQ","componentDidMount","qupdate","setInterval","setState","start","then","console","log","catch","err","componentWillUnmount","clearInterval","get","token","qrequestOptions","method","headers","qownresp","fetch","ok","qown","json","qresponse","qdata","requestOptions","response","qlistresponse","qlist","i","length","idUser","color","render","qsize","qid","qstate","place","inQ","Button1","backgroundColor","Button2","Button3","clickerColor","colorStr","fontSize","Button4","listElement","index","width","navigator","clipboard","writeText","Scroller","Queue","username","displayName","name","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Container, Row, Col, Spinner} from 'reactstrap';\r\nimport Cookies from 'js-cookie'\r\nimport { Virtuoso } from 'react-virtuoso';\r\nimport CustomScrollbar from \"./CustomScroller\";\r\nimport \"overlayscrollbars/css/OverlayScrollbars.css\";\r\nimport './GeneralQueue.scss';\r\nimport {Redirect, withRouter} from \"react-router-dom\";\r\nimport {AppContext} from './AppContext.jsx';\r\nimport { HubConnection } from '@aspnet/signalr-client';\r\n\r\n\r\nexport class GeneralQueue extends Component {\r\n    static displayName = GeneralQueue.name;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.intervalID = 0;\r\n        this.state = { qname: \"\", queue: [], qonline: true, loading: true, id: this.props.match.params.id, isOdmen: false, redirect: false, clicker: 0,  clickercolor: Math.floor(Math.random() * 270) + 60,\r\n            isInQueue: false, placeInQueue: 0, userId: sessionStorage.getItem('id'), hubConnection: null};\r\n\r\n        this.handleNext = this.handleNext.bind(this);\r\n        this.click = this.click.bind(this);\r\n        this.handleFreeze = this.handleFreeze.bind(this);\r\n        this.handleJoin = this.handleJoin.bind(this);\r\n        this.getQ = this.getQ.bind(this);\r\n        this.click = this.click.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getQ();\r\n        this.qupdate();\r\n        this.intervalID = setInterval(() => { this.qupdate(); }, 3000);\r\n        const hubConnection = new HubConnection('http://localhost:5000/queue');\r\n\r\n        this.setState({ hubConnection}, () => {\r\n            this.state.hubConnection\r\n                .start()\r\n                .then(() => console.log('Connection started!'))\r\n                .catch(err => console.log('Error while establishing connection :('));\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.intervalID);\r\n    }\r\n\r\n    async getQ() {\r\n        if (Cookies.get('JWT') != null) {\r\n            const token = \"Bearer \" + Cookies.get('JWT');\r\n\r\n            const qrequestOptions = {\r\n                method: 'GET',\r\n                headers: { 'Authorization': token }\r\n            };\r\n\r\n            const qownresp = await fetch(`IOwner/${this.state.id}`, qrequestOptions);\r\n            if (qownresp.ok) {\r\n                const qown = await qownresp.json();\r\n                this.setState({ isOdmen: qown });\r\n            }\r\n\r\n            const qresponse = await fetch(`event/${this.state.id}`, qrequestOptions);\r\n            if (qresponse.ok) {\r\n                const qdata = await qresponse.json();\r\n                this.setState({ qname: qdata[\"title\"], qonline: !qdata[\"isSuspended\"], loading: false });\r\n            }\r\n        }\r\n        else {\r\n            this.setState({ redirect: true });\r\n        }\r\n    }\r\n\r\n    async handleNext() {\r\n        if (this.state.isOdmen) {\r\n\r\n            const token = \"Bearer \" + Cookies.get('JWT');\r\n            const requestOptions = {\r\n                method: 'PUT',\r\n                headers: { 'Authorization': token }\r\n            };\r\n\r\n            const response = await fetch(`/queue/${this.state.id}/moder/next`, requestOptions);\r\n\r\n            if (response.ok) {\r\n                this.qupdate();\r\n            }\r\n        }\r\n        else {\r\n            this.setState({ redirect: true });\r\n        }\r\n    }\r\n\r\n\r\n    async handleFreeze() {\r\n        if (this.state.isOdmen) {\r\n            const token = \"Bearer \" + Cookies.get('JWT');\r\n            const requestOptions = {\r\n                method: 'PUT',\r\n                headers: { 'Authorization': token }\r\n            };\r\n\r\n\r\n            if (this.state.qonline) {\r\n                const response = await fetch(`/queue/${this.state.id}/moder/close`, requestOptions);\r\n                if (response.ok) {\r\n                    this.qupdate();\r\n                }\r\n            } else {\r\n                const response = await fetch(`/queue/${this.state.id}/moder/open`, requestOptions);\r\n                if (response.ok) {\r\n                    this.qupdate();\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.setState({ redirect: true });\r\n        }\r\n    }\r\n\r\n\r\n    async qupdate() {\r\n        if (Cookies.get('JWT') != null) {\r\n            const token = \"Bearer \" + Cookies.get('JWT');\r\n\r\n            const qrequestOptions = {\r\n                method: 'GET',\r\n                headers: { 'Authorization': token }\r\n            };\r\n\r\n            const qownresp = await fetch(`IOwner/${this.state.id}`, qrequestOptions);\r\n            if (qownresp.ok) {\r\n                const qown = await qownresp.json();\r\n                this.setState({ isOdmen: qown });\r\n            }\r\n\r\n            const qresponse = await fetch(`event/${this.state.id}`, qrequestOptions);\r\n            if (qresponse.ok) {\r\n                const qdata = await qresponse.json();\r\n                this.setState({ qname: qdata[\"title\"], qonline: !qdata[\"isSuspended\"] });\r\n            }\r\n\r\n            const qlistresponse = await fetch(`get_queue/${this.state.id}`, qrequestOptions);\r\n            if (qlistresponse.ok) {\r\n                const qlist = await qlistresponse.json();\r\n\r\n                this.setState({ placeInQueue: 0 });\r\n\r\n                for (var i = 0; i < qlist.length; i++) {\r\n                    if (qlist[i].idUser == this.state.userId) {\r\n                        this.setState({ isInQueue: true, placeInQueue: i + 1 });\r\n                    };\r\n                }\r\n                /*qlist.push({eventId: -1, id: -1, idUser: -1, number: -1, status: \"\", time_queue: \"\", username: \"\"});*/\r\n                this.setState({ queue: qlist });\r\n            }\r\n        }\r\n        else {\r\n            this.setState({ redirect: true });\r\n        }\r\n    }\r\n\r\n    click() {\r\n        let color = this.state.clickercolor;\r\n        if (color >= 360) {\r\n            color = 0;\r\n        }\r\n        this.setState({ clicker: this.state.clicker + 1, clickercolor: color + 1 });\r\n    }\r\n\r\n\r\n    async handleJoin() {\r\n        if (!this.state.isOdmen) {\r\n            const token = \"Bearer \" + Cookies.get('JWT');\r\n            const requestOptions = {\r\n                method: 'POST',\r\n                headers: { 'Authorization': token }\r\n            };\r\n\r\n            if (!this.state.isInQueue) {\r\n                const response = await fetch(`/queue/enter/${this.state.id}`, requestOptions);\r\n                if (response.ok) {\r\n                    this.setState({ isInQueue: true });\r\n                    this.qupdate();\r\n                }\r\n            } else {\r\n                requestOptions[\"method\"] = 'DELETE';\r\n                const response = await fetch(`/queue/delete/${this.state.id}`, requestOptions);\r\n                if (response.ok) {\r\n                    this.setState({ isInQueue: false });\r\n                    this.qupdate();\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.setState({ redirect: true });\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        let queue = this.state.queue\r\n        let qname = this.state.qname\r\n        let qsize = this.state.queue.length\r\n        let qid = this.state.id\r\n        let clicker = this.state.clicker\r\n        let isOdmen = this.state.isOdmen;\r\n        let qstate = this.state.qonline;\r\n        let place = this.state.placeInQueue;\r\n        let inQ = this.state.isInQueue;\r\n        let color = this.state.clickercolor;\r\n\r\n        const Button1 = () => {\r\n            if (isOdmen) {\r\n                return <div className=\"next_button\" onClick={this.handleNext}>NEXT</div>;\r\n            } else {\r\n                if (inQ) {\r\n                    return <div style={{backgroundColor: \"#E87C64\"}} className=\"join_button\" onClick={this.handleJoin}>LEAVE</div>;\r\n                } else {\r\n                    return <div className=\"join_button\" onClick={this.handleJoin}>JOIN</div>;\r\n                }\r\n            }\r\n        }\r\n\r\n        const Button2 = () => {\r\n            return <div className=\"ppl_inqueue\">{qsize}</div>;\r\n        }\r\n\r\n        const Button3 = () => {\r\n            if (isOdmen) {\r\n                if (qstate) {\r\n                    return <div className=\"freeze_button\" onClick={this.handleFreeze}><img src=\"/freeze.svg\" alt=\"\"/></div>;\r\n                } else {\r\n                    return <div style={{backgroundColor: \"#CCCCCC\"}} className=\"freeze_button\" onClick={this.handleFreeze}><img src=\"/freeze.svg\" alt=\"\" /></div>;\r\n                }\r\n            } else {\r\n                if (inQ) {\r\n                    return <div className=\"your_place\">You<br/>{place}</div>;\r\n                } else {\r\n                    return <div className=\"your_place\">You</div>;\r\n                }\r\n            }\r\n        }\r\n\r\n        const clickerColor = () => {\r\n            const colorStr = \"hsl(\" + color + \", 90%, 65%)\";\r\n            if (clicker <= 0) {\r\n                return { backgroundColor: colorStr, fontSize: '3vw'};\r\n            } else {\r\n                return { backgroundColor: colorStr };\r\n            }\r\n        }\r\n\r\n        const Button4 = () => {\r\n            if (clicker > 0) {\r\n                return <div className=\"clicker\" style={clickerColor()} onClick={this.click}>{clicker}</div>;\r\n            } else {\r\n                return <div className=\"clicker\" style={clickerColor()} onClick={this.click}>Click!</div>;\r\n            }\r\n        }\r\n\r\n        if (this.state.redirect) {\r\n            return (<Redirect push to={`/`} />);\r\n        }\r\n\r\n        if (this.state.loading) {\r\n            return (<div className=\"spinnerDiv\"><Spinner animation=\"border\" className=\"spinner\" /></div>);\r\n        }\r\n\r\n        const listElement = (index) => {\r\n            if (index == 0) {\r\n                return { backgroundColor: \"#82FF9D\" };\r\n            }\r\n            else if (index == place - 1) {\r\n                return { backgroundColor: \"#EDB734\" };\r\n            }\r\n            /*else if (index == qsize - 1) {\r\n                return { visibility: \"hidden\" };\r\n            }*/\r\n            else {\r\n                return { backgroundColor: \"white\" };\r\n            }\r\n        }\r\n\r\n\r\n        return (\r\n            <Container fluid>\r\n                <div className=\"main_block\">\r\n                    <Row>\r\n                        <div className=\"queue_name\">\r\n                            <Row style={{width:\"100%\"}}>\r\n                                <Col xs=\"9\" className=\"queue_name_col\">\r\n                                    {qname}\r\n                                </Col>\r\n                                <Col xs=\"3\" className=\"col3_custom\">\r\n                                    <div className=\"copy_link_button\" onClick={() => {navigator.clipboard.writeText(`${this.state.id}`)}} data-toggle=\"tooltip\" data-placement=\"top\" title=\"Copy queue link\">\r\n                                        <img src=\"/link.svg\" alt=\"\" height=\"100%\" />\r\n                                    </div>\r\n                                    <div style={{ backgroundColor: qstate ? \"#82FF9D\" : \"#CCCCCC\" }} className=\"queue_state\">\r\n                                    </div>\r\n                                    {/*<div className=\"queue_edit_button\" onClick={this.alert} data-toggle=\"tooltip\" data-placement=\"top\" title=\"Edit queue\">\r\n                                        <img src=\"/edit.svg\" alt=\"\" height=\"100%\" />\r\n                                    </div>*/}\r\n                                </Col>\r\n                            </Row>\r\n                        </div>\r\n                    </Row>\r\n\r\n                    <Row className=\"queue_block\">\r\n                        <Col sm=\"8\">\r\n                            <div className=\"queue\">\r\n                                <Virtuoso\r\n                                    components={{Scroller: CustomScrollbar}}\r\n                                    className=\"QList\"\r\n                                    data={queue}\r\n                                    itemContent={(index, Queue) => <div className=\"QItem\" style={listElement(index)}>{Queue.username}</div>}\r\n                                />\r\n                            </div>\r\n                        </Col>\r\n\r\n                        <Col sm=\"4\">\r\n                            <Row className=\"buttons\">\r\n                                <Col sm=\"6\" className=\"button\">\r\n                                    {Button1()}\r\n                                </Col>\r\n                                <Col sm=\"6\" className=\"button\">\r\n                                    {Button2()}\r\n                                </Col>\r\n                                <Col sm=\"6\" className=\"button\">\r\n                                    {Button3()}\r\n                                </Col>\r\n                                <Col sm=\"6\" className=\"button\">\r\n                                    {Button4()}\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n                    </Row>\r\n                </div>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nGeneralQueue.contextType = AppContext;\r\nexport default withRouter(GeneralQueue);"]},"metadata":{},"sourceType":"module"}