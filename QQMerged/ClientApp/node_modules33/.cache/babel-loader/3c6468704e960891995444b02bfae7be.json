{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\QQMerged\\\\ClientApp\\\\src\\\\components\\\\NavMenu.js\";\nimport React, { Component } from 'react';\nimport { Collapse, Container, Navbar, NavbarToggler, Row, Col } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport './NavMenu.css';\nimport { AppContext } from './AppContext.jsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class NavMenu extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.toggleNavbar = this.toggleNavbar.bind(this);\n    this.collapseState = this.collapseState.bind(this);\n    this.LogOut = this.LogOut.bind(this);\n    this.state = {\n      collapsed: true,\n      authorized: false,\n      username: \"\",\n      collapseExited: true,\n      loading: true\n    };\n  }\n\n  toggleNavbar() {\n    this.setState({\n      collapsed: !this.state.collapsed\n    });\n  }\n\n  collapseState() {\n    this.setState({\n      collapseExited: !this.state.collapseExited\n    });\n  }\n\n  componentDidMount() {\n    this.update();\n    this.intervalID = setInterval(() => {\n      this.update();\n    }, 300000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalID);\n  }\n\n  async update() {\n    if (Cookies.get('JWT') !== undefined) {\n      const token = \"Bearer \" + Cookies.get('JWT');\n      const requestOptions = {\n        method: 'GET',\n        headers: {\n          'Authorization': token\n        }\n      };\n      const response = await fetch('/my_account', requestOptions);\n\n      if (response.ok) {\n        const data = await response.json();\n        sessionStorage.setItem('id', data[\"idUser\"]);\n        this.context.toggleAuth(true);\n        this.setState({\n          authorized: true,\n          username: data[\"username\"],\n          loading: false\n        });\n      } else {\n        this.context.toggleAuth(false);\n        this.setState({\n          authorized: false,\n          loading: false\n        });\n      }\n    }\n\n    this.setState({\n      loading: false\n    });\n  }\n\n  LogOut() {\n    Cookies.remove('JWT');\n    this.context.toggleAuth(false);\n    window.open(\"/\", \"_self\");\n  }\n\n  render() {\n    let authorized = this.state.authorized;\n    let username = this.state.username;\n\n    const renderLogauntButton = () => {\n      if (authorized) {\n        return /*#__PURE__*/_jsxDEV(Link, {\n          style: {\n            marginRight: \"20px\"\n          },\n          onClick: this.LogOut,\n          children: \"Log Out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 24\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(Link, {\n          style: {\n            marginRight: \"20px\"\n          },\n          to: \"/login\",\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 24\n        }, this);\n      }\n    };\n\n    const renderSignauntButton = () => {\n      if (authorized) {\n        return /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/account\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"signup_button\",\n            children: username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 44\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 24\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"signup_button\",\n            children: \"Sign Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 45\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 24\n        }, this);\n      }\n    };\n\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(\"header\", {\n        children: /*#__PURE__*/_jsxDEV(Navbar, {\n          className: \"navbar-expand-lg navbar-toggleable-md\",\n          children: /*#__PURE__*/_jsxDEV(Container, {\n            fluid: true,\n            children: /*#__PURE__*/_jsxDEV(Row, {\n              style: {\n                width: \"100%\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                xs: \"3\",\n                style: {\n                  padding: \"unset\"\n                },\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"/logo.svg\",\n                    alt: \"\",\n                    height: \"60px\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 100,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                xs: \"9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }, this);\n    }\n\n    const navMenu = () => {\n      if (!this.state.collapsed) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"navCollapsed\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/createqueue\",\n            children: \"Create Queue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/myqueues\",\n            children: \"My Queues\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/about\",\n            children: \"About\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this), renderLogauntButton(), renderSignauntButton()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this);\n      } else if (this.state.collapseExited) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"navNotCollapsed\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: \"8\",\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"navbar-nav\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                style: {\n                  width: \"170px\"\n                },\n                to: \"/createqueue\",\n                children: \"Create Queue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                style: {\n                  width: \"170px\"\n                },\n                to: \"/myqueues\",\n                children: \"My Queues\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                style: {\n                  width: \"170px\"\n                },\n                to: \"/about\",\n                children: \"About\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: \"4\",\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"navbar-nav\",\n              style: {\n                justifyContent: \"flex-end\"\n              },\n              children: [renderLogauntButton(), renderSignauntButton()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"navCollapsed\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/createqueue\",\n            children: \"Create Queue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/myqueues\",\n            children: \"My Queues\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/about\",\n            children: \"About\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this), renderLogauntButton(), renderSignauntButton()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this);\n      }\n    };\n\n    return /*#__PURE__*/_jsxDEV(\"header\", {\n      children: /*#__PURE__*/_jsxDEV(Navbar, {\n        className: \"navbar-expand-lg navbar-toggleable-md\",\n        children: /*#__PURE__*/_jsxDEV(Container, {\n          fluid: true,\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            style: {\n              width: \"100%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              xs: \"3\",\n              style: {\n                padding: \"unset\"\n              },\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"/logo.svg\",\n                  alt: \"\",\n                  height: \"60px\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              xs: \"9\",\n              children: [/*#__PURE__*/_jsxDEV(NavbarToggler, {\n                onClick: this.toggleNavbar\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n                isOpen: !this.state.collapsed,\n                onExited: this.collapseState,\n                onEntering: this.collapseState,\n                navbar: true,\n                children: navMenu()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nNavMenu.displayName = NavMenu.name;\nNavMenu.contextType = AppContext;\nexport default NavMenu;","map":{"version":3,"sources":["D:/project/QQMerged/ClientApp/src/components/NavMenu.js"],"names":["React","Component","Collapse","Container","Navbar","NavbarToggler","Row","Col","Link","Cookies","AppContext","NavMenu","constructor","props","context","toggleNavbar","bind","collapseState","LogOut","state","collapsed","authorized","username","collapseExited","loading","setState","componentDidMount","update","intervalID","setInterval","componentWillUnmount","clearInterval","get","undefined","token","requestOptions","method","headers","response","fetch","ok","data","json","sessionStorage","setItem","toggleAuth","remove","window","open","render","renderLogauntButton","marginRight","renderSignauntButton","width","padding","navMenu","justifyContent","displayName","name","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Collapse, Container, Navbar, NavbarToggler, Row, Col} from 'reactstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport Cookies from 'js-cookie'\r\nimport './NavMenu.css';\r\n\r\nimport {AppContext} from './AppContext.jsx';\r\n\r\nexport class NavMenu extends Component {\r\n    static displayName = NavMenu.name;\r\n\r\n    constructor(props, context) {\r\n        super(props, context);\r\n\r\n        this.toggleNavbar = this.toggleNavbar.bind(this);\r\n        this.collapseState = this.collapseState.bind(this);\r\n        this.LogOut = this.LogOut.bind(this);\r\n\r\n        this.state = { collapsed: true , authorized: false, username: \"\", collapseExited: true, loading: true};\r\n    }\r\n\r\n    toggleNavbar() {\r\n        this.setState({collapsed: !this.state.collapsed});\r\n    }\r\n\r\n    collapseState() {\r\n        this.setState({collapseExited: !this.state.collapseExited});\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.update();\r\n        this.intervalID = setInterval(() => { this.update(); }, 300000);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.intervalID);\r\n    }\r\n\r\n    async update() {\r\n        if (Cookies.get('JWT') !== undefined) {\r\n\r\n            const token = \"Bearer \" + Cookies.get('JWT');\r\n\r\n            const requestOptions = {\r\n                method: 'GET',\r\n                headers: { 'Authorization': token }\r\n            };\r\n\r\n            const response = await fetch('/my_account', requestOptions);\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                sessionStorage.setItem('id', data[\"idUser\"]);\r\n                this.context.toggleAuth(true);\r\n                this.setState({ authorized: true, username: data[\"username\"], loading: false});\r\n            }\r\n            else {\r\n                this.context.toggleAuth(false);\r\n                this.setState({ authorized: false, loading: false});\r\n            }\r\n        }\r\n        this.setState({ loading: false});\r\n    }\r\n\r\n    LogOut() {\r\n        Cookies.remove('JWT');\r\n        this.context.toggleAuth(false);\r\n        window.open(\"/\", \"_self\");\r\n    }\r\n\r\n    render() {\r\n        let authorized = this.state.authorized;\r\n        let username = this.state.username;\r\n\r\n        const renderLogauntButton = () => {\r\n            if ( authorized ) {\r\n                return <Link style={{ marginRight: \"20px\" }} onClick={this.LogOut}>Log Out</Link>;\r\n            } else {\r\n                return <Link style={{ marginRight: \"20px\" }} to=\"/login\">Log In</Link>;\r\n            }\r\n        }\r\n\r\n        const renderSignauntButton = () => {\r\n            if ( authorized ) {\r\n                return <Link to=\"/account\"><div className=\"signup_button\">{username}</div></Link>;\r\n            } else {\r\n\r\n                return <Link to=\"/register\"><div className=\"signup_button\">Sign Up</div></Link>;\r\n            }\r\n        }\r\n\r\n        if (this.state.loading) {\r\n            return(\r\n            <header>\r\n                <Navbar className=\"navbar-expand-lg navbar-toggleable-md\">\r\n                    <Container fluid>\r\n                        <Row style={{width: \"100%\"}}>\r\n                            <Col xs=\"3\" style={{padding: \"unset\"}}>\r\n                                <Link to=\"/\">\r\n                                    <img src=\"/logo.svg\" alt=\"\" height=\"60px\" />\r\n                                </Link>\r\n                            </Col>\r\n                            <Col xs=\"9\"></Col>\r\n                        </Row>\r\n                    </Container>\r\n                </Navbar>\r\n            </header>)\r\n        }\r\n\r\n        const navMenu = () => {\r\n            if (!this.state.collapsed) {\r\n                return (\r\n                    <div className=\"navCollapsed\">\r\n                        <Link to=\"/createqueue\">Create Queue</Link>\r\n                        <Link to=\"/myqueues\">My Queues</Link>\r\n                        <Link to=\"/about\">About</Link>\r\n                        {renderLogauntButton()}\r\n                        {renderSignauntButton()}\r\n                    </div>\r\n                )\r\n            } else if (this.state.collapseExited) {\r\n                return (\r\n                    <div className=\"navNotCollapsed\">\r\n                        <Col xs=\"8\">\r\n                            <ul className=\"navbar-nav\">\r\n                                <Link style={{ width: \"170px\" }} to=\"/createqueue\">Create Queue</Link>\r\n                                <Link style={{ width: \"170px\" }} to=\"/myqueues\">My Queues</Link>\r\n                                <Link style={{ width: \"170px\" }} to=\"/about\">About</Link>\r\n                            </ul>\r\n                        </Col>\r\n                        <Col xs=\"4\">\r\n                            <ul className=\"navbar-nav\" style={{ justifyContent: \"flex-end\" }}>\r\n                                {renderLogauntButton()}\r\n                                {renderSignauntButton()}\r\n                            </ul>\r\n                        </Col>\r\n                    </div>\r\n                )\r\n            }\r\n            else {\r\n                return (\r\n                    <div className=\"navCollapsed\">\r\n                        <Link to=\"/createqueue\">Create Queue</Link>\r\n                        <Link to=\"/myqueues\">My Queues</Link>\r\n                        <Link to=\"/about\">About</Link>\r\n                        {renderLogauntButton()}\r\n                        {renderSignauntButton()}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n\r\n        return (\r\n            <header>\r\n                <Navbar className=\"navbar-expand-lg navbar-toggleable-md\">\r\n                    <Container fluid>\r\n                        <Row style={{width: \"100%\"}}>\r\n                            <Col xs=\"3\" style={{padding: \"unset\"}}>\r\n                                <Link to=\"/\">\r\n                                    <img src=\"/logo.svg\" alt=\"\" height=\"60px\" />\r\n                                </Link>\r\n                            </Col>\r\n\r\n                            <Col xs=\"9\">\r\n                                <NavbarToggler onClick={this.toggleNavbar} />\r\n                                <Collapse isOpen={!this.state.collapsed} onExited={this.collapseState} onEntering={this.collapseState} navbar>\r\n                                    {navMenu()}\r\n                                </Collapse>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                </Navbar>\r\n            </header>\r\n        );\r\n    }\r\n}\r\n\r\nNavMenu.contextType = AppContext;\r\nexport default NavMenu;"]},"metadata":{},"sourceType":"module"}