{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\QQMerged\\\\ClientApp\\\\src\\\\components\\\\MyQueues.jsx\";\nimport React, { Component } from 'react';\nimport { Container, Row, Col, Modal, ModalHeader, ModalFooter } from 'reactstrap';\nimport Cookies from 'js-cookie';\nimport { Virtuoso } from 'react-virtuoso';\nimport CustomScrollbar from \"./CustomScroller\";\nimport \"overlayscrollbars/css/OverlayScrollbars.css\";\nimport './MyQueues.scss';\nimport { Redirect } from \"react-router-dom\";\nimport { AppContext } from './AppContext.jsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class MyQueues extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      showContentJoined: true,\n      redirect: false,\n      joinedlist: [],\n      createdlist: [],\n      idToDelete: -1,\n      showNfmsg: false\n    };\n    this.deleteAsk = this.deleteAsk.bind(this);\n    this.deleteUnAsk = this.deleteUnAsk.bind(this);\n    this.deleteQueue = this.deleteQueue.bind(this);\n  }\n\n  componentDidMount() {\n    this.qupdate();\n  }\n\n  async qupdate() {\n    if (Cookies.get('JWT') != null) {\n      const token = \"Bearer \" + Cookies.get('JWT');\n      const qrequestOptions = {\n        method: 'GET',\n        headers: {\n          'Authorization': token\n        }\n      };\n      let joinedlistData = [];\n      let createdlistData = [];\n      const joinedlistresponse = await fetch(`get_my_queue`, qrequestOptions);\n\n      if (joinedlistresponse.ok) {\n        joinedlistData = await joinedlistresponse.json();\n      }\n\n      const createdlistresponse = await fetch(`get_my_event`, qrequestOptions);\n\n      if (createdlistresponse.ok) {\n        createdlistData = await createdlistresponse.json();\n      }\n\n      this.setState({\n        createdlist: createdlistData,\n        joinedlist: joinedlistData,\n        loading: false\n      });\n    } else {\n      this.setState({\n        redirect: true\n      });\n    }\n  }\n\n  joined() {\n    this.setState({\n      showContentJoined: true\n    });\n  }\n\n  created() {\n    this.setState({\n      showContentJoined: false\n    });\n  }\n\n  openQueue(id) {\n    this.props.history.push(`queue/${id}`);\n  }\n\n  deleteAsk(id) {\n    this.setState({\n      showNfmsg: !this.state.showNfmsg,\n      idToDelete: id\n    });\n  }\n\n  deleteUnAsk() {\n    this.setState({\n      showNfmsg: !this.state.showNfmsg,\n      idToDelete: -1\n    });\n  }\n\n  async deleteQueue() {\n    const token = \"Bearer \" + Cookies.get('JWT');\n    const requestOptions = {\n      method: 'PUT',\n      headers: {\n        'Authorization': token\n      }\n    };\n    const response = await fetch(`/queue/${this.state.idToDelete}/moder/finish`, requestOptions);\n    this.setState({\n      showNfmsg: !this.state.showNfmsg,\n      idToDelete: -1\n    });\n\n    if (response.ok) {\n      this.qupdate();\n    }\n  }\n\n  render() {\n    let joinedlist = this.state.joinedlist;\n    let createdlist = this.state.createdlist;\n    let showJoined = this.state.showContentJoined;\n\n    if (this.state.redirect) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        push: true,\n        to: `/login`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }, this);\n    }\n\n    const renderList = () => {\n      if (this.state.showContentJoined) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"list\",\n          children: /*#__PURE__*/_jsxDEV(Virtuoso, {\n            components: {\n              Scroller: CustomScrollbar\n            },\n            className: \"EventList\",\n            data: joinedlist,\n            itemContent: (index, Queue) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"EventItem\",\n              onClick: this.openQueue.bind(this, Queue.eventId),\n              children: Queue.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 56\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"list\",\n          children: /*#__PURE__*/_jsxDEV(Virtuoso, {\n            components: {\n              Scroller: CustomScrollbar\n            },\n            className: \"EventList\",\n            data: createdlist,\n            itemContent: (index, Queue) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"EventItem\",\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                xs: \"10\",\n                onClick: this.openQueue.bind(this, Queue.eventId),\n                children: Queue.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                xs: \"2\",\n                style: {\n                  display: \"flex\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"trash_btn_box\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"/trash-icon 1.svg\",\n                    alt: \"\",\n                    onClick: this.deleteAsk.bind(this, Queue.eventId)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 25\n        }, this);\n      }\n    };\n\n    return /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"list_mainblock\",\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col padding-0\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"switch_btn\",\n              style: {\n                marginTop: showJoined ? \"1px\" : \"5%\"\n              },\n              onClick: () => this.joined(),\n              children: \"Joined\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col padding-0\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"switch_btn\",\n              style: {\n                marginTop: !showJoined ? \"1px\" : \"5%\"\n              },\n              onClick: () => this.created(),\n              children: \"Created\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }, this), renderList()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: this.state.showNfmsg,\n        toggle: this.deleteAsk,\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          children: \"Are you sure you want to delete queue?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"not_ok_button\",\n            onClick: this.deleteUnAsk,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ok_button\",\n            onClick: this.deleteQueue,\n            children: \"DELETE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nMyQueues.displayName = MyQueues.name;\nMyQueues.contextType = AppContext;","map":{"version":3,"sources":["D:/project/QQMerged/ClientApp/src/components/MyQueues.jsx"],"names":["React","Component","Container","Row","Col","Modal","ModalHeader","ModalFooter","Cookies","Virtuoso","CustomScrollbar","Redirect","AppContext","MyQueues","constructor","props","state","loading","showContentJoined","redirect","joinedlist","createdlist","idToDelete","showNfmsg","deleteAsk","bind","deleteUnAsk","deleteQueue","componentDidMount","qupdate","get","token","qrequestOptions","method","headers","joinedlistData","createdlistData","joinedlistresponse","fetch","ok","json","createdlistresponse","setState","joined","created","openQueue","id","history","push","requestOptions","response","render","showJoined","renderList","Scroller","index","Queue","eventId","title","display","marginTop","displayName","name","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Container, Row, Col, Modal, ModalHeader, ModalFooter} from 'reactstrap';\r\nimport Cookies from 'js-cookie'\r\nimport { Virtuoso } from 'react-virtuoso';\r\nimport CustomScrollbar from \"./CustomScroller\";\r\nimport \"overlayscrollbars/css/OverlayScrollbars.css\";\r\nimport './MyQueues.scss';\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {AppContext} from './AppContext.jsx';\r\n\r\n\r\nexport class MyQueues extends Component {\r\n    static displayName = MyQueues.name;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {loading: true, showContentJoined: true, redirect: false, joinedlist:[], createdlist:[], idToDelete:-1, showNfmsg: false};\r\n\r\n        this.deleteAsk = this.deleteAsk.bind(this);\r\n        this.deleteUnAsk = this.deleteUnAsk.bind(this);\r\n        this.deleteQueue = this.deleteQueue.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.qupdate();\r\n    }\r\n\r\n    async qupdate() {\r\n        if (Cookies.get('JWT') != null) {\r\n            const token = \"Bearer \" + Cookies.get('JWT');\r\n\r\n            const qrequestOptions = {\r\n                method: 'GET',\r\n                headers: { 'Authorization': token }\r\n            };\r\n\r\n            let joinedlistData = [];\r\n            let createdlistData = [];\r\n\r\n            const joinedlistresponse = await fetch(`get_my_queue`, qrequestOptions);\r\n            if (joinedlistresponse.ok) {\r\n                joinedlistData = await joinedlistresponse.json();\r\n            }\r\n\r\n            const createdlistresponse = await fetch(`get_my_event`, qrequestOptions);\r\n            if (createdlistresponse.ok) {\r\n                createdlistData = await createdlistresponse.json();\r\n            }\r\n\r\n            this.setState({ createdlist: createdlistData, joinedlist: joinedlistData, loading: false });\r\n        }\r\n        else {\r\n            this.setState({ redirect: true });\r\n        }\r\n    }\r\n\r\n    joined() {\r\n        this.setState({showContentJoined: true })\r\n    }\r\n\r\n    created() {\r\n        this.setState({showContentJoined: false })\r\n    }\r\n\r\n    openQueue(id) {\r\n        this.props.history.push(`queue/${id}`);\r\n    }\r\n\r\n    deleteAsk(id) {\r\n        this.setState({ showNfmsg: !this.state.showNfmsg, idToDelete:id});\r\n    }\r\n\r\n    deleteUnAsk() {\r\n        this.setState({ showNfmsg: !this.state.showNfmsg, idToDelete:-1});\r\n    }\r\n\r\n    async deleteQueue() {\r\n        const token = \"Bearer \" + Cookies.get('JWT');\r\n        const requestOptions = {\r\n            method: 'PUT',\r\n            headers: { 'Authorization': token }\r\n        };\r\n\r\n        const response = await fetch(`/queue/${this.state.idToDelete}/moder/finish`, requestOptions);\r\n\r\n        this.setState({ showNfmsg: !this.state.showNfmsg, idToDelete:-1});\r\n\r\n        if (response.ok) {\r\n            this.qupdate();\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        let joinedlist = this.state.joinedlist;\r\n        let createdlist = this.state.createdlist;\r\n        let showJoined = this.state.showContentJoined;\r\n\r\n        if (this.state.redirect) {\r\n            return (<Redirect push to={`/login`} />);\r\n        }\r\n\r\n        const renderList = () => {\r\n            if (this.state.showContentJoined) {\r\n                return (<div className=\"list\">\r\n                    <Virtuoso\r\n                        components={{ Scroller: CustomScrollbar }}\r\n                        className=\"EventList\"\r\n                        data={joinedlist}\r\n                        itemContent={(index, Queue) => <div className=\"EventItem\" onClick={this.openQueue.bind(this, Queue.eventId)}>{Queue.title}</div>}\r\n                    />\r\n                </div>)\r\n            }\r\n            else {\r\n                return (<div className=\"list\">\r\n                    <Virtuoso\r\n                        components={{ Scroller: CustomScrollbar }}\r\n                        className=\"EventList\"\r\n                        data={createdlist}\r\n                        itemContent={(index, Queue) =>\r\n                            <div className=\"EventItem\">\r\n                                <Col xs=\"10\" onClick={this.openQueue.bind(this, Queue.eventId)}>\r\n                                    {Queue.title}\r\n                                </Col>\r\n                                <Col xs=\"2\" style={{display: \"flex\"}}>\r\n                                    <div className=\"trash_btn_box\">\r\n                                        <img src=\"/trash-icon 1.svg\" alt=\"\" onClick={this.deleteAsk.bind(this, Queue.eventId)} />\r\n                                    </div>\r\n                                </Col>\r\n                            </div>}\r\n                    />\r\n                </div>)\r\n            }\r\n        }\r\n\r\n        return (\r\n            <Container fluid>\r\n                <div className=\"list_mainblock\">\r\n                    <Row>\r\n                        <div className=\"col padding-0\" >\r\n                            <div className=\"switch_btn\" style={{marginTop: showJoined? \"1px\":\"5%\"}} onClick={() => this.joined()}>Joined</div>\r\n                        </div>\r\n                        <div className=\"col padding-0\">\r\n                            <div className=\"switch_btn\" style={{marginTop: !showJoined? \"1px\":\"5%\"}}onClick={() => this.created()}>Created</div>\r\n                        </div>\r\n                        {renderList()}\r\n                    </Row>\r\n                </div>\r\n\r\n                <Modal isOpen={this.state.showNfmsg} toggle={this.deleteAsk}>\r\n                    <ModalHeader>\r\n                        Are you sure you want to delete queue?\r\n                    </ModalHeader>\r\n                    <ModalFooter>\r\n                        <div className=\"not_ok_button\" onClick={this.deleteUnAsk}>Cancel</div>\r\n                        <div className=\"ok_button\" onClick={this.deleteQueue}>DELETE</div>\r\n                    </ModalFooter>\r\n                </Modal>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nMyQueues.contextType = AppContext;\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}