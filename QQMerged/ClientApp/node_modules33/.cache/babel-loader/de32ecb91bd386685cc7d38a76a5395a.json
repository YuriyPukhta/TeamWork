{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\QQMerged\\\\ClientApp\\\\src\\\\components\\\\NavMenu.js\";\nimport React, { Component } from 'react';\nimport { Collapse, Container, Navbar, NavbarToggler, Row, Col } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport './NavMenu.css';\nimport { AppContext } from './AppContext.jsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class NavMenu extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.toggleNavbar = this.toggleNavbar.bind(this);\n    this.collapseState = this.collapseState.bind(this);\n    this.LogOut = this.LogOut.bind(this);\n    this.state = {\n      collapsed: true,\n      authorized: false,\n      username: \"\",\n      collapseExited: true\n    };\n  }\n\n  toggleNavbar() {\n    this.setState({\n      collapsed: !this.state.collapsed\n    });\n  }\n\n  collapseState() {\n    this.setState({\n      collapseExited: !this.state.collapseExited\n    });\n  }\n\n  componentDidMount() {\n    this.intervalID = setInterval(() => {\n      this.update();\n    }, 60000);\n    this.update();\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalID);\n  }\n\n  async update() {\n    if (Cookies.get('JWT') !== undefined) {\n      const token = \"Bearer \" + Cookies.get('JWT');\n      const requestOptions = {\n        method: 'GET',\n        headers: {\n          'Authorization': token\n        }\n      };\n      const response = await fetch('/my_account', requestOptions);\n\n      if (response.ok) {\n        const data = await response.json();\n        sessionStorage.setItem('id', data[\"idUser\"]);\n        this.context.toggleAuth(true);\n        this.setState({\n          authorized: true,\n          username: data[\"username\"]\n        });\n      }\n    }\n  }\n\n  LogOut() {\n    Cookies.remove('JWT');\n    this.context.toggleAuth(false);\n    window.open(\"/\", \"_self\");\n  }\n\n  render() {\n    let authorized = this.state.authorized;\n    let username = this.state.username;\n\n    const renderLogauntButton = () => {\n      if (authorized) {\n        return /*#__PURE__*/_jsxDEV(Link, {\n          style: {\n            marginRight: \"20px\"\n          },\n          onClick: this.LogOut,\n          children: \"Log Out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 24\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(Link, {\n          style: {\n            marginRight: \"20px\"\n          },\n          to: \"/login\",\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 24\n        }, this);\n      }\n    };\n\n    const renderSignauntButton = () => {\n      if (authorized) {\n        return /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/account\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"signup_button\",\n            children: username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 44\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 24\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"signup_button\",\n            children: \"Sign Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 45\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 24\n        }, this);\n      }\n    };\n\n    const navMenu = () => {\n      if (!this.state.collapsed) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"navCollapsed\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/createqueue\",\n            children: \"Create Queue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/myqueues\",\n            children: \"My Queues\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/about\",\n            children: \"About\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this), renderLogauntButton(), renderSignauntButton()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this);\n      } else if (this.state.collapseExited) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"navNotCollapsed\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: \"8\",\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"navbar-nav\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                style: {\n                  width: \"170px\"\n                },\n                to: \"/createqueue\",\n                children: \"Create Queue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                style: {\n                  width: \"170px\"\n                },\n                to: \"/myqueues\",\n                children: \"My Queues\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                style: {\n                  width: \"170px\"\n                },\n                to: \"/about\",\n                children: \"About\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: \"4\",\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"navbar-nav\",\n              style: {\n                justifyContent: \"flex-end\"\n              },\n              children: [renderLogauntButton(), renderSignauntButton()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"navCollapsed\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/createqueue\",\n            children: \"Create Queue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/myqueues\",\n            children: \"My Queues\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/about\",\n            children: \"About\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this), renderLogauntButton(), renderSignauntButton()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this);\n      }\n    };\n\n    return /*#__PURE__*/_jsxDEV(\"header\", {\n      children: /*#__PURE__*/_jsxDEV(Navbar, {\n        className: \"navbar-expand-lg navbar-toggleable-md\",\n        children: /*#__PURE__*/_jsxDEV(Container, {\n          fluid: true,\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            style: {\n              width: \"100%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              xs: \"3\",\n              style: {\n                padding: \"unset\"\n              },\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"/logo.svg\",\n                  alt: \"\",\n                  height: \"60px\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              xs: \"9\",\n              children: [/*#__PURE__*/_jsxDEV(NavbarToggler, {\n                onClick: this.toggleNavbar\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n                isOpen: !this.state.collapsed,\n                onExited: this.collapseState,\n                onEntering: this.collapseState,\n                navbar: true,\n                children: navMenu()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nNavMenu.displayName = NavMenu.name;\nNavMenu.contextType = AppContext;\nexport default NavMenu;","map":{"version":3,"sources":["D:/project/QQMerged/ClientApp/src/components/NavMenu.js"],"names":["React","Component","Collapse","Container","Navbar","NavbarToggler","Row","Col","Link","Cookies","AppContext","NavMenu","constructor","props","context","toggleNavbar","bind","collapseState","LogOut","state","collapsed","authorized","username","collapseExited","setState","componentDidMount","intervalID","setInterval","update","componentWillUnmount","clearInterval","get","undefined","token","requestOptions","method","headers","response","fetch","ok","data","json","sessionStorage","setItem","toggleAuth","remove","window","open","render","renderLogauntButton","marginRight","renderSignauntButton","navMenu","width","justifyContent","padding","displayName","name","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Collapse, Container, Navbar, NavbarToggler, Row, Col} from 'reactstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport Cookies from 'js-cookie'\r\nimport './NavMenu.css';\r\n\r\nimport {AppContext} from './AppContext.jsx';\r\n\r\nexport class NavMenu extends Component {\r\n    static displayName = NavMenu.name;\r\n\r\n    constructor(props, context) {\r\n        super(props, context);\r\n\r\n        this.toggleNavbar = this.toggleNavbar.bind(this);\r\n        this.collapseState = this.collapseState.bind(this);\r\n        this.LogOut = this.LogOut.bind(this);\r\n\r\n        this.state = { collapsed: true , authorized: false, username: \"\", collapseExited: true};\r\n    }\r\n\r\n    toggleNavbar() {\r\n        this.setState({collapsed: !this.state.collapsed});\r\n    }\r\n\r\n    collapseState() {\r\n        this.setState({collapseExited: !this.state.collapseExited});\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.intervalID = setInterval(() => { this.update(); }, 60000);\r\n        this.update();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.intervalID);\r\n    }\r\n\r\n    async update() {\r\n        if (Cookies.get('JWT') !== undefined) {\r\n\r\n            const token = \"Bearer \" + Cookies.get('JWT');\r\n\r\n            const requestOptions = {\r\n                method: 'GET',\r\n                headers: { 'Authorization': token }\r\n            };\r\n\r\n            const response = await fetch('/my_account', requestOptions);\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                sessionStorage.setItem('id', data[\"idUser\"]);\r\n                this.context.toggleAuth(true);\r\n                this.setState({ authorized: true, username: data[\"username\"]});\r\n            }\r\n        }\r\n    }\r\n\r\n    LogOut() {\r\n        Cookies.remove('JWT');\r\n        this.context.toggleAuth(false);\r\n        window.open(\"/\", \"_self\");\r\n    }\r\n\r\n    render() {\r\n        let authorized = this.state.authorized;\r\n        let username = this.state.username;\r\n\r\n        const renderLogauntButton = () => {\r\n            if ( authorized ) {\r\n                return <Link style={{ marginRight: \"20px\" }} onClick={this.LogOut}>Log Out</Link>;\r\n            } else {\r\n                return <Link style={{ marginRight: \"20px\" }} to=\"/login\">Log In</Link>;\r\n            }\r\n        }\r\n\r\n        const renderSignauntButton = () => {\r\n            if ( authorized ) {\r\n                return <Link to=\"/account\"><div className=\"signup_button\">{username}</div></Link>;\r\n            } else {\r\n                return <Link to=\"/register\"><div className=\"signup_button\">Sign Up</div></Link>;\r\n            }\r\n        }\r\n\r\n        const navMenu = () => {\r\n            if (!this.state.collapsed) {\r\n                return (\r\n                    <div className=\"navCollapsed\">\r\n                        <Link to=\"/createqueue\">Create Queue</Link>\r\n                        <Link to=\"/myqueues\">My Queues</Link>\r\n                        <Link to=\"/about\">About</Link>\r\n                        {renderLogauntButton()}\r\n                        {renderSignauntButton()}\r\n                    </div>\r\n                )\r\n            } else if (this.state.collapseExited) {\r\n                return (\r\n                    <div className=\"navNotCollapsed\">\r\n                        <Col xs=\"8\">\r\n                            <ul className=\"navbar-nav\">\r\n                                <Link style={{ width: \"170px\" }} to=\"/createqueue\">Create Queue</Link>\r\n                                <Link style={{ width: \"170px\" }} to=\"/myqueues\">My Queues</Link>\r\n                                <Link style={{ width: \"170px\" }} to=\"/about\">About</Link>\r\n                            </ul>\r\n                        </Col>\r\n                        <Col xs=\"4\">\r\n                            <ul className=\"navbar-nav\" style={{ justifyContent: \"flex-end\" }}>\r\n                                {renderLogauntButton()}\r\n                                {renderSignauntButton()}\r\n                            </ul>\r\n                        </Col>\r\n                    </div>\r\n                )\r\n            }\r\n            else {\r\n                return (\r\n                    <div className=\"navCollapsed\">\r\n                        <Link to=\"/createqueue\">Create Queue</Link>\r\n                        <Link to=\"/myqueues\">My Queues</Link>\r\n                        <Link to=\"/about\">About</Link>\r\n                        {renderLogauntButton()}\r\n                        {renderSignauntButton()}\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n\r\n        return (\r\n            <header>\r\n                <Navbar className=\"navbar-expand-lg navbar-toggleable-md\">\r\n                    <Container fluid>\r\n                        <Row style={{width: \"100%\"}}>\r\n                            <Col xs=\"3\" style={{padding: \"unset\"}}>\r\n                                <Link to=\"/\">\r\n                                    <img src=\"/logo.svg\" alt=\"\" height=\"60px\" />\r\n                                </Link>\r\n                            </Col>\r\n\r\n                            <Col xs=\"9\">\r\n                                <NavbarToggler onClick={this.toggleNavbar} />\r\n                                <Collapse isOpen={!this.state.collapsed} onExited={this.collapseState} onEntering={this.collapseState} navbar>\r\n                                    {navMenu()}\r\n                                </Collapse>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                </Navbar>\r\n            </header>\r\n        );\r\n    }\r\n}\r\n\r\nNavMenu.contextType = AppContext;\r\nexport default NavMenu;"]},"metadata":{},"sourceType":"module"}